<template>

    <c-twist-google-analytics autodata={autodata} ontwistgalwcrendered={handleTwistGaLwcRendered}></c-twist-google-analytics>

    <div class="component">
        <h2 class="component__title">{customLabels.Twist_Reset_Password_Form_ResetYourPasswordTitle}</h2>

        <p class="component__text">{customLabels.Twist_Reset_Password_Form_YourEmailText}: <span class="email">{user.email}</span></p>
        <p class="component__text">{customLabels.Twist_Reset_Password_Form_EnterNewPasswordText}</p>
        
        <div if:true={resetPasswordForm.form.error}>
            <div class="global-error-message">{resetPasswordForm.form.error}</div>
        </div>

        <form class="component__form">
            
            <div class="twist-password-field-container">
                <lightning-input
                    name="password"
                    autocomplete="new-password"
                    class={passwordFieldCssClass}
                    type={resetPasswordForm.password.type}
                    label={customLabels.Twist_Reset_Password_Form_PasswordFieldLabel}
                    value=""
                    onchange={handleFormPasswordChange}
                    onfocus={handleFormPasswordFocus}
                    onblur={handleFormPasswordBlur}
                    >
                </lightning-input>
                <img class="eye-icon" src={eyeIconSrcPassword} onclick={toggleShowPassword} />
            </div>
            <div if:true={resetPasswordForm.password.error}>
                <div class="field-error-message">{resetPasswordForm.password.error}</div>
            </div>
            <div if:true={language}>
                <c-twist-password-validity-criteria language={language} onchildlwcrendered={handleChildLwcRendered}></c-twist-password-validity-criteria>
            </div>

            <div class="twist-password-field-container">
                <lightning-input
                    name="confirmPassword"
                    class={confirmPasswordFieldCssClass}
                    type={resetPasswordForm.confirmPassword.type}
                    label={customLabels.Twist_Reset_Password_Form_ConfirmPasswordFieldLabel}
                    value=""
                    onchange={handleFormConfirmPasswordChange}
                    >

                </lightning-input>
                <img class="eye-icon" src={eyeIconSrcConfirmPassword} onclick={toggleShowConfirmPassword} />
            </div>
            <div if:true={resetPasswordForm.confirmPassword.error}>
                <div class="field-error-message">{resetPasswordForm.confirmPassword.error}</div>
            </div>
            
            <div class="button__container">
                <div class="button__container-wrap">
                    <template if:true={isSubmitButtonDisabled}>
                        <lightning-button label={customLabels.Twist_Reset_Password_Form_SubmitButtonLabel} class="form__button" onclick={handleClickOnSubmitButton} disabled></lightning-button>
                    </template>
                    <template if:false={isSubmitButtonDisabled}>
                        <lightning-button label={customLabels.Twist_Reset_Password_Form_SubmitButtonLabel} class="form__button" onclick={handleClickOnSubmitButton}></lightning-button>
                    </template>
                </div>
            </div>
                
        </form>
    
    </div>

</template>