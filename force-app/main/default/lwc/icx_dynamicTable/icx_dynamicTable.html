<template>
  <template if:true={tableData}>
    <div if:true={tableData.title} class="title-container__header">
      <div class={tableData.title.titleClass} onclick={handleListView}>
        <img if:true={tableData.title.isWithIcon} src={tableData.title.iconSrc} />
        {tableData.title.label}
        <span if:true={tableData.title.hasLength}> ({tableData.title.length})</span>
      </div>
      <div class="button-redirection" if:true={createRecord}>
        <lightning-button-menu alternative-text="Show menu">
          <lightning-menu-item value="MenuItemOne" label="New" onclick={handleCreateButton}>
          </lightning-menu-item>
        </lightning-button-menu>
      </div>
      <div if:true={autorizeToDisplay} class="special-button-wrapper">
        <div if:true={createNewButton}>
          <!-- <lightning-button variant="brand" label="Create Request " title="Primary action" onclick={handleClick} class="slds-m-left_x-small special-button"></lightning-button> -->
          <button value="New" label="New " title="New" onclick={handleCreateButton} class="special-button">New</button>
        </div>
      </div>
      <!-- <div if:true={createDistantCareServiceButton} class="special-button-wrapper">
                <lightning-button variant="brand" label="Create Request " title="Primary action" onclick={handleClick} class="slds-m-left_x-small special-button"></lightning-button>
                <button  value="Create Request" label="Create Request " title="Primary action" onclick={handleCreateButton} class="special-button">Create a Care Service</button>
            </div>         -->
    </div>

    <slot name="content"></slot>


    <table class="container">
      <tr if:false={tableData.title} class="title-container">
        <template if:true={tableData.headers}>
          <template for:each={tableData.headers} for:item="column">

            <th key={getGuidId} if:false={column.isHeader}>
              {column.label}
              <lightning-button-icon if:true={column.isWithFilter} icon-name="utility:filterList" size="xx-small"
                alternative-text="Filter" title="Filter" class="slds-button slds-button_icon filter-icon"
                onclick={clickFunction}>
              </lightning-button-icon>
            </th>
          </template>
        </template>
      </tr>
      <template if:true={tableData.rows}>
        <template for:each={tableData.rows} for:item="row" for:index="index">
          <!-- use 'row-colors' css class for alternative rows grey and white
                    use 'row-with-border' css class to add border bottom on the row -->
          <tr key={getGuidId} class={myRowClass}>

            <template if:true={row} for:each={row} for:item="item">

              <template lwc:if={item.isCheckboxType}>
                <td key={getGuidId} class="row__case ">
                  <lightning-input data-index={index} onchange={handleCheckbox} type="checkbox"> </lightning-input>
                </td>
              </template>
							<template lwc:if={item.isLinkType}>
                <td key={getGuidId} class="row__case ">
                  <a data-id={item.id} onclick={handleLinkNavigation}>{item.value}</a>
                </td>
              </template>

              <template lwc:else>
                <td key={getGuidId} data-index={index} onclick={handleClickRow} class="row__case ">
                  <img lwc:if={item.isImageType} src={item.value} class={myImageClass} />
                  <template lwc:elseif={item.isTextWithIcon}>
                    <div class="container__iconText">
                      <img lwc:if={item.value.imgSrc} src={item.value.imgSrc} class="container__iconText--icon">
                      <span class="container__iconText--text text-style">{item.value.text}</span>
                    </div>
                  </template>
                  <template lwc:elseif={item.isRating}>
                    <c-stars-rating score={item.value} total-stars="5"></c-stars-rating>
                  </template>
                  <template lwc:else>
                    <span lwc:if={isWithSubtitles} class="subtitle-text">
                      {item.label}
                    </span>
                    <span class="text-style"> {item.value} </span>
                  </template>
                </td>

              </template>

            </template>
          </tr>
        </template>
      </template>
    </table>
    <!-- The button of merge available only if two  or more identical records selected by the user for merge purpose  -->

    <div if:true={authToMerge} class="merge-button-container">
      <button class="merge-action" disabled={disableMerge} onclick={handleMergeAction}>Merge<img class="mbi"
          src={mergeButtonIcon} alt=""></button>
      <!-- <lightning-button  variant="brand" label="Merge" disabled={disable} onclick={handleMergeAction} class="slds-m-left_x-small merge-action"></lightning-button> -->
    </div>

    <div class="button-container" if:true={isViewMoreDisplay}>
      <button class="slds-button slds-button_neutral" onclick={handleListView}>View More</button>
    </div>
  </template>
</template>