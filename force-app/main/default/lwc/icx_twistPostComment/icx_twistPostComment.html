<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 05-23-2024
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
    <div class=" slds-p-around_small slds-is-relative  " lwc:if={isLoading}>
        <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
    </div>
    <div lwc:else class=sectionRecords__container>
        <template for:each={records} for:item="item">
            <div key={item.id} class="record___card">
                <b class="record___card--subtitle"> {item.OwnerName} </b>
                <p> Reason : <span class="record___card--subtitle"> {item.Reason__c}</span></p>
                <p> Comment : <span class="record___card--subtitle">{item.Comment__c}</span></p>
                <div>
                    <lightning-formatted-date-time value={item.CreatedDate} year="2-digit" month="long" day="numeric"
                        hour="2-digit" minute="2-digit">
                    </lightning-formatted-date-time>
                </div>
            </div>
        </template>

    </div>


    <lightning-accordion allow-multiple-sections-open="false" class="container__accordion">
        <lightning-accordion-section class="sectionComment__accordion" name='newComment' label="Add Comment">

            <div class="sectionComment__container">
                <span class="sectionComment__title">Reasons</span>
                <span class="mandatory">*</span>
                <lightning-helptext content="Choose a reason before posting a comment"></lightning-helptext>
            </div>

            <div class="sectionComment__container">
                <lightning-combobox name="reasonOptions" placeholder="Select Reason" variant="label-hidden"
                    value={listReasonOptionsSelected} options={listReasonOptions} onchange={handleListReasonOptions}>
                </lightning-combobox>
            </div>

            <div class="sectionComment__container">
                <lightning-record-edit-form object-api-name="Fraud_Comment__c" onsubmit={handleSubmit}
                    onsuccess={handleSuccess}>
                    <lightning-input-field field-name="Comment__c" variant="label-hidden"
                        placeholder="Add a comment..."></lightning-input-field>
                    <div class="sectionComment__container">
                        <lightning-button class="slds-m-top_small" type="submit" label="Post Comment"
                            disabled={disabledPostComment}></lightning-button>
                    </div>
                </lightning-record-edit-form>
            </div>

        </lightning-accordion-section>
    </lightning-accordion>
</template>