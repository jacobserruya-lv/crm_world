<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>SPO_Do_Not_Change_Workshop</fullName>
    <active>true</active>
    <description>Prevent users from changing the related workshop if order is already in production. 
(Jira: MIY-1504)</description>
    <errorConditionFormula>AND(
    ISCHANGED(Workshop__c),
    OR(
        ISPICKVAL(StageName, &apos;In progress&apos;),
        ISPICKVAL(StageName, &apos;Distribution in Progress&apos;),
        ISPICKVAL(StageName, &apos;Received in store&apos;),
        ISPICKVAL(StageName, &apos;Closed Won&apos;),
        ISPICKVAL(StageName, &apos;Cancelled by store&apos;),
        ISPICKVAL(StageName, &apos;Cancelled by production&apos;)
    ),
    NOT($Profile.Name = &apos;System Administrator&apos;),
    NOT($Profile.Name = &apos;MIY_Admin&apos;),
    NOT($User.BypassVR__c)
)</errorConditionFormula>
    <errorDisplayField>Workshop__c</errorDisplayField>
    <errorMessage>The order is already in production. You can no longer change the related workshop.</errorMessage>
</ValidationRule>
