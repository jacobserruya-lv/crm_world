<apex:page controller="IDENTITY_Registration_CTRL" title="{!$Label.IDENTITY_Registration_Window_Title}"
    language="{!language}" showHeader="false" applyBodyTag="false" applyHtmlTag="false" sidebar="false"
    docType="html-5.0" standardStylesheets="false" action="{!log}" cache="false">

    <apex:composition template="IDENTITY_Template">
        <apex:define name="head">
            <title>{!$Label.IDENTITY_Registration_Window_Title}</title>

            <!-- import LV & SALESFORCE CSS and JS -->
            <c:Identity_LV_Scripts paths="{!paths}" country_local="{!country_local}" isDevMode="{!isDevMode}" isNewDesignActive="{!isNewDesignActive}" customCss="{!customCss}" />

            <!-- import PHONE NUMBER FORMATTER -->
            <apex:includeScript value="{!URLFOR($Resource.PhoneFormatter, '/js/phoneformatter.js')}" />
            <apex:includeScript value="{!URLFOR($Resource.PhoneFormatter, '/js/intlTelInput.js')}" />

            <!-- import Captcha -->
            <apex:variable rendered="{! country_local == 'cn' }" var="captcha" value="captcha">
                <apex:includeScript value="{! captcha_url }" />
            </apex:variable>

            <!-- Redirection to LVApp -->
            <script type="text/javascript">
                var current_url = new URL(window.location.href);
                
                if (needNavigationToLVAPP(current_url, '{!origin}', '{!redirectToLvApp}')) {
                    
                    /*old: lvpass://account_activation/{gender}/{firstName}/{lastName}/{country}/{login}/{firstname2}/{lastname2}/{redirection}/{CID}*/
                    /*new: lvpass://account_activation/{CID}/{redirection}*/

                    // URL SCHEME
                    var new_url = '{! JSINHTMLENCODE(paths["LVAPP URL Scheme"]) }';

                    new_url += 'account_activation' + '/';
                    new_url += '{!cidUrlEncoded}' + '/';
                    new_url += '{!redirectionDeeplinkValue}';
                    
                    navigateToLVAPP(current_url, new_url);
                }
            </script>
        </apex:define>

        <apex:define name="body">

                <body id="body" data-pv-event="pageview"
                class="page-type-storelocator_section id-page {!IF(isDevMode, 'id-page_is-dev-mode', '')} {! IF(lang_country=='ara-ae', 'arabic', '') }" dir="{! fields['Settings']['page_direction'].Value__c }">
                <div class="page salesforce-account-creation">
                    <!-- TO SCROLL UP - MANAGED BY LV -->
                    <a id="pageTop" tabindex="-1"></a>

                    <!-- HEADER -->
                    <apex:outputPanel rendered="{! origin != 'lvapp' && origin != 'lvconnect'}" layout="none">
                        <header class="id-page__header">
                            <a href="{! JSINHTMLENCODE(paths['Louis Vuitton Domain'])+'/'+lang_country+'/homepage' }" tabindex="1">
                                <img class="id-page__header-logo"
                                    src="{!URLFOR($Resource.Identity_Registration_CSS, 'lvtitle.png')}"
                                    alt="Louis Vuitton" />
                            </a>
                            <apex:outputText styleClass="header-title" id="header-title"
                                value="{!$Label.IDENTITY_Registration_Header_Title}" />
                        </header>
                    </apex:outputPanel>

                    <!-- BACK BUTTON -->
                    <nav class="id-page__nav-row">
                        <apex:form >
                            <apex:commandLink id="back_button" onclick="back();" oncomplete="setup();setFocus();"
                                styleClass="id-page__back-btn" rendered="{! ( isDevMode || isNewDesignActive) && origin != 'lvconnect'}"
                                tabindex="-1">
                                <svg viewBox="0 0 80 80" version="1.1" xmlns="http://www.w3.org/2000/svg">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g fill="#19110B">
                                            <polygon id="Fill-1"
                                                transform="translate(40.000000, 40.136274) scale(-1, 1) translate(-40.000000, -40.136274) "
                                                points="62.6420585 23 57.9060461 27.8669755 66.9114544 36.6308297 0 37.5436907 0.0921591929 44.3343681 67.1015934 43.4195669 58.225208 52.5423569 63.087333 57.2725487 80 39.8913249">
                                            </polygon>
                                        </g>
                                    </g>
                                </svg>
                            </apex:commandLink>
                        </apex:form>
                    </nav>

                    <!-- FORM -->
                    <c:IDENTITY_addressSearchPopup />

                    <apex:outputPanel layout="block" id="content"
                        styleClass="{!'content' + IF(country_local == 'kr', ' content_large', '')}">
                        <div class="registrationTemplate">
                            <div class="registrationWrapper">
                                <div id="leftColumn" class="leftColumn id-page__main">

                                    <!-- MANAGED BY LV -->
                                    <div id="serviceClientNumber" style="display: inline-block;"></div>

                                    <!-- SALESFORCE FORM -->
                                    <div id="createNewProfile" class="">
                                        <div id="page">

                                            <!-- AUTO LOGOUT -->
                                            <apex:iframe src="{!$Site.Prefix}/secur/logout.jsp" height="1" width="1"
                                                rendered="{!NOT(ISPICKVAL($User.UserType,'Guest'))}" />

                                            <!-- HEADER OF THE PAGE -->
                                            <h1>
                                                <apex:outputText styleClass="id-page-title" value="{!
                                                                    IF( mode == 'ACTIVATION' && sub_mode == 'PARTIAL',
                                                                        $Label.IDENTITY_Activation_Title, $Label.IDENTITY_Registration_Title)
                                                                    }"
                                                                  rendered="{! origin != 'lvconnect' }" />
                                            </h1>

                                            <apex:form styleClass="id-page-form" id="form">
                                                <div class="id-page-form__subtitle-row">
                                                    <!-- REMOVE AFTER REPAINT -->
                                                    <apex:commandButton id="back_button" onclick="back(); return false;" reRender=""
                                                        value="{!'< ' + $Label.IDENTITY_Registration_Back_Button}"
                                                        oncomplete="setup();setFocus();"
                                                        styleClass="id-page-form__back-btn"
                                                        rendered="{!NOT(isDevMode) && NOT(isNewDesignActive)}" />

                                                    <!-- DESCRIPTION -->
                                                    <apex:outputText styleClass="id-page-form__mandatory-fields"
                                                        value="{!$Label.IDENTITY_Registration_Mandatory_Fields_Remark}"
                                                        escape="false" />
                                                </div>

                                                <!-- ****************************** KOREAN SECTION ****************************** -->

                                                <apex:outputPanel layout="block" id="kisa_section" style="display: none"
                                                    styleClass="id-page-form__step id-page-form__step_num_0">

                                                    <apex:outputText value="{!$Label.IDENTITY_Registration_KISA_Title}"
                                                        styleClass="id-page-form__section-title" />
                                                    <apex:outputText styleClass="id-page-form__section-count" rendered="{! origin != 'lvconnect' }" />

                                                    <div class="id-page-form__korean-section id-page-form__section">
                                                        <apex:outputText value="{!$Label.IDENTITY_Registration_KISA_Short_Description}"
                                                            styleClass="id-page-form__section-subtitle" />

                                                        <!-- ACCEPT ALL -->
                                                        <div class="id-page-form__checkbox-field id-page-form__kisa-all-btn lv-connect_korean-checkbox-container">
                                                            
                                                            <!-- default checkbox -->
                                                            <div class="stylish-checkbox" style="{!IF(origin != 'lvconnect','','display:none;')}">
                                                                <input id="{! IF( origin != 'lvconnect' , 'kisa-agreement-all' , 'kisa-agreement-all2')}"
                                                                       type="checkbox"
                                                                       onclick="onAllKisaAgreementsChange()" />
                                                            </div>
                                                            
                                                            <!-- lvconnect checkbox -->
                                                            <label class="lvconnect-switch" style="{!IF(origin == 'lvconnect','','display:none;')}" >
                                                                <input id="{! IF( origin == 'lvconnect' , 'kisa-agreement-all' , 'kisa-agreement-all2')}" 
                                                                       type="checkbox"
                                                                       onclick="onAllKisaAgreementsChange()" />
                                                                <span class="lv-connect-round-slider"  ></span>
                                                            </label>
                                                            
                                                            <apex:outputLabel for="kisa-agreement-all"
                                                                value="{!$Label.IDENTITY_Registration_KISA_Accept_all_3_terms}"
                                                                styleClass="id-page-form__label-checkbox" />
                                                        </div>

                                                        <!-- LV CONDITIONS -->
                                                        <div class="id-page-form__checkbox-field lv-connect_korean-checkbox-container">
                                                            
                                                            <!-- default checkbox -->
                                                            <div class="stylish-checkbox" style="{!IF(origin != 'lvconnect','','display:none;')}">
                                                                <input id="{! IF (origin != 'lvconnect', 'kisa-agreement-1', 'kisa-agreement-1b')}" type="checkbox"
                                                                    onclick="onKisaAgreementChange()" />
                                                            </div>
                                                            
                                                             <!-- lvconnect checkbox -->
                                                            <label class="lvconnect-switch" style="{!IF(origin == 'lvconnect','','display:none;')}">
                                                                <input id="{! IF (origin == 'lvconnect', 'kisa-agreement-1', 'kisa-agreement-1b')}" 
                                                                       type="checkbox"
                                                                       onclick="onKisaAgreementChange()" />
                                                                 <span class="lv-connect-round-slider"></span>
                                                            </label>
                                                           
                                                            <apex:outputLabel for="kisa-agreement-1"
                                                                value="{! $Label.IDENTITY_Registration_KISA_LV_Conditions }"
                                                                styleClass="id-page-form__label-checkbox" />
                                                            <apex:commandButton id="kisa-btn-1"
                                                                onclick="onKisaAgreementExpand(1, '{!expanded_kisa_details_index}', {! IF( origin != 'lvconnect' , false , true)} ); return false;"
                                                                value="{! IF(origin != 'lvconnect' , $Label.IDENTITY_Registration_KISA_View_Details , '')}"
                                                                styleClass="{!'id-page-form__kisa-details-btn' +
                                                                                    IF(expanded_kisa_details_index == 1, ' id-page-form__kisa-details-btn_expanded', '')
                                                                                    }" />
                                                        </div>

                                                        <!-- USING DATA -->
                                                        <div class="id-page-form__checkbox-field lv-connect_korean-checkbox-container">
                                                            
                                                            <!-- default checkbox -->
                                                            <div class="stylish-checkbox"  style="{!IF(origin != 'lvconnect','','display:none;')}">
                                                                <input id="{! IF (origin != 'lvconnect', 'kisa-agreement-2', 'kisa-agreement-2b')}" 
                                                                       type="checkbox"
                                                                       onclick="onKisaAgreementChange()" />
                                                            </div>
                                                            
                                                            <!-- lvconnect checkbox -->
                                                            <label class="lvconnect-switch" style="{!IF(origin == 'lvconnect','','display:none;')}">
                                                                <input id="{! IF (origin == 'lvconnect', 'kisa-agreement-2', 'kisa-agreement-2b')}" 
                                                                       type="checkbox"
                                                                       onclick="onKisaAgreementChange()" />
                                                                 <span class="lv-connect-round-slider"></span>
                                                            </label>
                                                            
                                                            <apex:outputLabel for="kisa-agreement-2"
                                                                value="{!$Label.IDENTITY_Registration_KISA_Using_Data}"
                                                                styleClass="id-page-form__label-checkbox" />
                                                            <apex:commandButton id="kisa-btn-2"
                                                                onclick="onKisaAgreementExpand(2, '{!expanded_kisa_details_index}', {! IF( origin != 'lvconnect' , false , true)}); return false;"
                                                                value="{! IF (origin != 'lvconnect', $Label.IDENTITY_Registration_KISA_View_Details,'')}"
                                                                styleClass="{!'id-page-form__kisa-details-btn' +
                                                                                    IF(expanded_kisa_details_index == 2, ' id-page-form__kisa-details-btn_expanded', '')
                                                                                    }" />
                                                        </div>

                                                        <!-- TRANSFERING DATA -->
                                                        <div class="id-page-form__checkbox-field lv-connect_korean-checkbox-container">
                                                           
                                                            <!-- default checkbox -->
                                                            <div class="stylish-checkbox" style="{!IF(origin != 'lvconnect','','display:none;')}">
                                                                <input id="{! IF (origin != 'lvconnect', 'kisa-agreement-3', 'kisa-agreement-3b')}" 
                                                                       type="checkbox"
                                                                    onclick="onKisaAgreementChange()" />
                                                            </div>
                                                            
                                                            <!-- lvconnect checkbox -->
                                                            <label class="lvconnect-switch" style="{!IF(origin == 'lvconnect','','display:none;')}">
                                                                <input id="{! IF (origin == 'lvconnect', 'kisa-agreement-3', 'kisa-agreement-3b')}" 
                                                                       type="checkbox"
                                                                       onclick="onKisaAgreementChange()" />
                                                                 <span class="lv-connect-round-slider"></span>
                                                            </label>
                                                            
                                                            <apex:outputLabel for="kisa-agreement-3"
                                                                value="{!$Label.IDENTITY_Registration_KISA_Transferring}"
                                                                styleClass="id-page-form__label-checkbox" />
                                                            <apex:commandButton id="kisa-btn-3"
                                                                value="{!IF (origin != 'lvconnect',$Label.IDENTITY_Registration_KISA_View_Details, '')}"
                                                                onclick="onKisaAgreementExpand(3, '{!expanded_kisa_details_index}', {! IF( origin != 'lvconnect' , false , true)}); return false;"
                                                                styleClass="{!'id-page-form__kisa-details-btn' +
                                                                                    IF(expanded_kisa_details_index == 3, ' id-page-form__kisa-details-btn_expanded', '')
                                                                                    }" />
                                                        </div>

                                                        <!-- TRANSFERING DATA NOTIFY -->
                                                        <div class="id-page-form__checkbox-field lv-connect_korean-checkbox-container">
                                                            
                                                            <!-- default checkbox -->
                                                            <div class="stylish-checkbox" style="{!IF(origin != 'lvconnect','','display:none;')}">
                                                                <input id="{! IF (origin != 'lvconnect', 'kisa-agreement-4', 'kisa-agreement-4b')}" 
                                                                       type="checkbox"
                                                                       onclick="onKisaAgreementChange()" />
                                                            </div>
                                                              
                                                            <!-- lvconnect checkbox -->
                                                            <label class="lvconnect-switch" style="{!IF(origin == 'lvconnect','','display:none;')}">
                                                                <input id="{! IF (origin == 'lvconnect', 'kisa-agreement-4', 'kisa-agreement-4b')}" 
                                                                       type="checkbox"
                                                                       onclick="onKisaAgreementChange()" />
                                                                 <span class="lv-connect-round-slider"></span>
                                                            </label>
                                                            
                                                            <apex:outputLabel for="kisa-agreement-4"
                                                                value="{!$Label.IDENTITY_Registration_KISA_Transferring_Notify}"
                                                                styleClass="id-page-form__label-checkbox" />
                                                            <apex:commandButton id="kisa-btn-4"
                                                                value="{!IF (origin != 'lvconnect', $Label.IDENTITY_Registration_KISA_View_Details, '')}"
                                                                onclick="onKisaAgreementExpand(4, '{!expanded_kisa_details_index}', {! IF( origin != 'lvconnect' , false , true)}); return false;"
                                                                styleClass="{!'id-page-form__kisa-details-btn' +
                                                                                    IF(expanded_kisa_details_index == 4, ' id-page-form__kisa-details-btn_expanded', '')
                                                                                    }" />
                                                        </div>

                                                        <!-- AGE -->
                                                        <div class="id-page-form__checkbox-field lv-connect_korean-checkbox-container">
                                                             
                                                            <!-- default checkbox -->
                                                            <div class="stylish-checkbox" style="{!IF(origin != 'lvconnect','','display:none;')}">
                                                                <input id="{! IF (origin != 'lvconnect', 'kisa-agreement-5', 'kisa-agreement-5b')}" 
                                                                       type="checkbox"
                                                                       onclick="onKisaAgreementChange()" />
                                                            </div>
                                                            
                                                            <!-- lvconnect checkbox -->
                                                            <label class="lvconnect-switch" style="{!IF(origin == 'lvconnect','','display:none;')}">
                                                                <input id="{! IF (origin == 'lvconnect', 'kisa-agreement-5', 'kisa-agreement-5b')}" 
                                                                       type="checkbox"
                                                                       onclick="onKisaAgreementChange()" />
                                                                 <span class="lv-connect-round-slider"></span>
                                                            </label>
                                                            
                                                            <apex:outputLabel for="kisa-agreement-5"
                                                                value="{!$Label.IDENTITY_Registration_KISA_Age}"
                                                                styleClass="id-page-form__label-checkbox" />
                                                        </div>
                                                    </div>
                                                    <!-- Default DETAILS -->
                                                    <apex:outputPanel layout="block"
                                                                      id="kisa_details"
                                                                      rendered="{! origin != 'lvconnect' }"
                                                                      styleClass="kisa-details">
                                                        <c:IDENTITY_REGISTRATION_KISA_Terms_Details index="{! expanded_kisa_details_index }" />
                                                    </apex:outputPanel>
                                                    
                                                    <!-- lvconnect DETAILS -->
                                                    <div class="identity-reg-kisa_details-pop-up-container" >
                                                        <div class="identity-reg-kisa_details-pop-up-sub-container" >
                                                            <apex:outputLabel styleClass="kisa-btn-close"
                                                                              value=""
                                                                              rendered="{! origin == 'lvconnect' }"
                                                                              onclick="toogleKisaAgreementExpand()" >
                                                            </apex:outputLabel>
                                                                  <apex:outputPanel layout="block"
                                                                      id="lvconnect_kisa_details"
                                                                      rendered="{! origin == 'lvconnect' }"
                                                                      styleClass="kisa-details">
                                                                    <c:IDENTITY_REGISTRATION_KISA_Terms_Details index="{! expanded_kisa_details_index }" />
                                                                </apex:outputPanel>
                                                          
                                                            <div class="kisa-pop-up-footer">
                                                               <apex:outputLabel styleClass="kisa-confirm-btn"
                                                                              value="{! $Label.IDENTITY_LV_Connect_Kisa_Send }"
                                                                              rendered="{! origin == 'lvconnect' }"
                                                                              onclick="kisaAgreementPopUp()" >
                                                                </apex:outputLabel>
                                                            
                                                                 <apex:outputLabel styleClass="btn-close"
                                                                                  value="{! $Label.IDENTITY_LV_Connect_Kisa_Cancel }"
                                                                                  rendered="{! origin == 'lvconnect' }"
                                                                                  onclick="toogleKisaAgreementExpand()" >
                                                                </apex:outputLabel>
                                                            </div>
                                                         
                                                        </div>
                                                    
                                                    </div>

                                                    <div class="korean-submit-details-container id-page-form__btn-row">
                                                        <span class="id-page-form__submit-text">
                                                            {!$Label.IDENTITY_Registration_Kisa_Agreement}                                                               </span>
                                                        <apex:commandButton value="{!$Label.IDENTITY_Registration_KISA_Submit_Button}"
                                                        id="kisa_button" onclick="onKisaButtonSubmit(); return false;"
                                                        styleClass="id-page-form__btn id-page-form__btn_full-width"
                                                        reRender="" oncomplete=""
                                                        html-data-evt-event="createAccountSuccess"
                                                        html-data-evt-action-id="account_creation_succeeded"
                                                        html-data-evt-action-type="submit_button"
                                                        html-data-evt-page-rank="step_options"
                                                        html-data-evt-category-ga="mylv"
                                                        html-data-evt-action-ga="create_an_account_form_sf"
                                                        html-data-evt-label-ga="account_creation_options_succeeded" />                                                      
                                                    </div>
                                                </apex:outputPanel>

                                                <!-- ****************************** LOGIN SECTION ******************************* -->

                                                <apex:outputPanel layout="block" id="login_section"
                                                    style="display: none"
                                                    styleClass="{! 'id-page-form__step id-page-form__step_num_1 ' +
                                                        IF(country_local == 'cn',' login_section-chinese','' )}">

                                                    <div>
                                                        
                                                    <h2 id="h2_login" tabindex="-1">
                                                        <apex:outputText styleClass="id-page-form__section-title"
                                                            value="{! IF(origin != 'lvconnect', 
                                                                        $Label.IDENTITY_Registration_Login_Section_Title, 
                                                                        $Label.IDENTITY_LV_Connect_Reg_Section_Title)
                                                                   }"/>
                                                        <apex:outputText styleClass="id-page-form__section-count" rendered="{! origin != 'lvconnect' }"/>
                                                    </h2>

                                                    <div class="id-page-form__section">

                                                        <!-- ********* SOCIAL LOGIN ********* -->
                                                        <!-- LINE -->
                                                        <apex:outputPanel layout="block" rendered="{! origin != 'lvapp' && origin != 'lvconnect' && !fields['Quick Login']['Line'].Is_Hidden__c && isSocialLoginVisible }" styleClass="line-btn-container id-page-form__field-wrap social-login-wrap">                                                         
                                                           <button id="social-login-line" onclick="return socialLogin('Line')" html-data-social-name="Line"
                                                            class="id-page-form__btn id-page-form__btn_full-width"> 
                                                                <svg viewBox="0 0 18 18" focusable="false" aria-hidden="true" class="ui-icon-social-line"><path d="M8.546 17.608h-.128c-.142 0-.218-.119-.218-.36.119-.766.18-1.244.18-1.424 0-.17-.019-.312-.061-.43-.043-.12-.142-.214-.308-.28-.16-.066-.322-.118-.478-.151-2.21-.313-4.017-1.14-5.423-2.49C.705 11.13 0 9.555 0 7.752c0-1.344.407-2.57 1.216-3.676.81-1.108 1.898-1.988 3.26-2.64C5.84.78 7.358.45 9.028.45c1.633 0 3.138.326 4.505.984 1.368.653 2.456 1.533 3.26 2.64C17.598 5.183 18 6.408 18 7.752c0 1.61-.639 3.104-1.912 4.486-1.211 1.368-2.962 2.778-5.243 4.216-1.23.771-2.001 1.155-2.3 1.155zm-2.9-7.514c.117 0 .179-.17.179-.507 0-.326-.062-.487-.18-.487H3.951V5.982c0-.11-.16-.161-.487-.161-.336 0-.507.052-.507.16V9.91c0 .118.052.18.161.18h2.527v.005zm1.239 0c.25 0 .393-.02.426-.053.028-.037.047-.733.047-2.091 0-1.344-.014-2.035-.047-2.073-.029-.037-.071-.052-.119-.052-.468 0-.724.02-.766.052-.043.038-.062.73-.062 2.073 0 1.358.02 2.054.062 2.091.042.034.199.053.459.053zm4.33 0c.264 0 .416-.02.449-.053.033-.033.052-.733.052-2.091 0-1.344-.019-2.035-.052-2.073-.033-.037-.08-.052-.128-.052-.468 0-.719.02-.757.052-.038.034-.052.847-.052 2.433-1.202-1.633-1.812-2.456-1.831-2.46-.019-.006-.038-.01-.062-.01l-.36-.02c-.274 0-.425.02-.449.053-.023.038-.038.728-.038 2.072 0 1.358.015 2.054.038 2.092.024.038.175.052.45.052.326 0 .487-.062.487-.18V7.567l1.836 2.489c.047.023.185.038.417.038zm3.818 0c.109 0 .161-.17.161-.507 0-.326-.052-.487-.16-.487h-1.747v-.648c1.202 0 1.822-.02 1.855-.052.033-.034.052-.185.052-.45 0-.326-.052-.487-.16-.487h-1.747v-.668h1.746c.109 0 .161-.156.161-.468 0-.336-.052-.506-.16-.506-1.742 0-2.627.014-2.66.047-.029.028-.048.724-.048 2.082 0 1.358.015 2.054.048 2.091.028.038.07.053.118.053h2.541z"/>
                                                                </svg>  
                                                                {!$Label.IDENTITY_Login_Page_Social_Login_Line}
                                                            </button> 
                                                        </apex:outputPanel>

                                                        <!-- WECHAT -->
                                                        <apex:outputPanel layout="block" rendered="{! origin != 'lvapp' && origin != 'lvconnect' && !fields['Quick Login']['WeChat'].Is_Hidden__c && isWeChatVisible && isSocialLoginVisible }" styleClass="line-btn-container id-page-form__field-wrap social-login-wrap">                                                         
                                                            <button id="social-login-wechat" onclick="return socialLogin('WeChat')" html-data-social-name="WeChat"
                                                            class="id-page-form__btn id-page-form__btn_full-width"> 
                                                                <svg viewBox="0 0 80 80" focusable="false" aria-hidden="true" class="ui-icon-social-wechat"><path d="M36.3,37.1c4.6-4.4,10.2-6.4,16.6-6.8c-0.3-3.7-1.7-7.3-4-10.2c-6.2-8.2-17.8-11.6-28.1-8.2
                                                                    c-7.5,2.4-13,7.2-15.3,15C3.2,34.7,6.3,43.5,14.1,49c1.2,0.8,1.3,1.6,1,2.9c-0.3,1.3-0.9,3.6-1.4,5.7c2.6-1.5,4.7-3,7-4.2
                                                                    c0.7-0.4,1.6-0.5,2.4-0.5c2.3,0.2,5.6,0.3,8.1,0.6C30.6,46.8,31.7,41.5,36.3,37.1z M38.8,24.7c1.6,0,2.9,1.3,2.9,2.9
                                                                    c0.1,1.5-1.2,2.8-2.7,2.9c-0.1,0-0.1,0-0.2,0c-1.6,0-2.9-1.2-3-2.8C35.9,26.1,37.2,24.8,38.8,24.7z M20.3,30.7c-1.7,0-3-1.3-3-3
                                                                    s1.3-3,3-3c0,0,0.1,0,0.1,0c1.6,0.1,2.9,1.4,2.9,3C23.3,29.4,22,30.7,20.3,30.7z"/><path d="M70.4,39.5c-5.6-7.2-19.8-10.3-28.9-4.3S30,54.5,38.8,62.7c4.5,4.2,10.5,6.1,16.6,5.4c2.1-0.2,4.2-1.4,6.2-1.2
                                                                    c2,0.2,3.8,1.6,5.8,2.5c0-0.5-0.2-1-0.4-1.5c-1.2-2.3-0.5-3.8,1.5-5.5C75.3,56.3,76,46.7,70.4,39.5z M46.7,44.7c0,1.3-1,2.3-2.3,2.3
                                                                    c0,0-0.1,0-0.1,0c-1.3,0-2.3-1-2.4-2.3c0-1.3,1.1-2.4,2.4-2.5c1.3,0,2.4,1.1,2.4,2.4C46.7,44.6,46.7,44.7,46.7,44.7z M59.1,47
                                                                    c-1.3-0.1-2.4-1.2-2.3-2.5c0.1-1.2,1.2-2.2,2.4-2.3c1.3,0.1,2.4,1.2,2.4,2.5C61.5,46,60.4,47.1,59.1,47z"/>
                                                                </svg>    
                                                                {!$Label.IDENTITY_Login_Page_Social_Login_WeChat}                                                                    
                                                            </button>
                                                        </apex:outputPanel>

                                                        <!-- KAKAO -->
                                                        <apex:outputPanel layout="block" rendered="{! origin != 'lvapp' && origin != 'lvconnect' && !fields['Quick Login']['Kakao'].Is_Hidden__c && isSocialLoginVisible }" styleClass="line-btn-container id-page-form__field-wrap social-login-wrap">                                                         
                                                            <button id="social-login-kakao" onclick="return socialLogin('Kakao')" html-data-social-name="Kakao"
                                                            class="id-page-form__btn id-page-form__btn_full-width"> 
                                                                <svg viewBox="0 0 18 18" focusable="false" aria-hidden="true" class="ui-icon-social-kakao"><path d="M9 .675c-4.97 0-9 3.177-9 7.096 0 2.534 1.685 4.757 4.219 6.013-.138.475-.886 3.058-.916 3.261 0 0-.018.153.08.21.1.059.216.014.216.014.283-.04 3.283-2.147 3.802-2.513.52.073 1.053.111 1.599.111 4.97 0 9-3.177 9-7.096S13.97.675 9 .675z"/>
                                                                </svg>  
                                                                {!$Label.IDENTITY_Login_Page_Social_Login_Kakao}                                                                    
                                                            </button>                                                            
                                                        </apex:outputPanel>

                                                        <!-- OR (SOCIAL LOGIN) -->
                                                        <apex:outputLabel rendered="{! origin != 'lvapp' && origin != 'lvconnect' && isSocialLoginActive && isSocialLoginVisible && ( fields['Quick Login']['WeChat'].Is_Hidden__c || (!fields['Quick Login']['WeChat'].Is_Hidden__c && isWeChatVisible) ) }"
                                                            value="{!$Label.IDENTITY_Login_Page_Social_Login_Or}"
                                                            styleClass="id-page-form__label id-page-form__label-or" id="social-login-or" />

                                                        <!-- MOBILE PHONE -->
                                                        <apex:outputPanel layout="block"
                                                            styleClass="mobile-phone-container id-page-form__email-wrap id-page-form__field-wrap"
                                                            rendered="{! !fields['Login']['mobile_phone'].Is_Hidden__c }">
                                                            <apex:outputLabel for="login_mobile_phone"
                                                                value="{!$Label.IDENTITY_Registration_Mobile_Phone_Label}"
                                                                rendered="{! !fields['Login']['mobile_phone'].Is_Hidden__c }"
                                                                styleClass="{!'id-page-form__label' +
                                                                                IF(fields['Login']['mobile_phone'].Is_Required__c,
                                                                                        ' id-page-form__label_is-required',
                                                                                        ' id-page-form__label_is-optional'
                                                                                        )
                                                                                }" />
                                                            <apex:panelGrid columns="2"
                                                                rendered="{! !fields['Login']['mobile_phone'].Is_Hidden__c }"
                                                                styleClass="id-page-form__select-grid"
                                                                id="id-page-form__mobile-phone"
                                                                html-role="presentation">
                                                                <apex:selectList size="1" id="login_calling_code"
                                                                    value="{! client.login_calling_code }"
                                                                    onblur="onLoginCallingCodeChange()"
                                                                    title="{!$Label.IDENTITY_Registration_Calling_Code_Title}"
                                                                    styleClass="id-page-form__select id-page-form__select_is-valid">
                                                                    <apex:selectOptions value="{! CallingCodes }" />
                                                                </apex:selectList>
                                                                <apex:input id="login_mobile_phone"
                                                                    value="{! client.login_mobile_phone }" type="tel"
                                                                    html-placeholder="{!$Label.IDENTITY_Registration_Mobile_Phone_Placeholder}"
                                                                    html-autocomplete="off"
                                                                    html-aria-describedby="login_mobile_phone_error"
                                                                    html-aria-required="{!fields['Login']['mobile_phone'].Is_Required__c}"
                                                                    onblur="onLoginMobilePhoneChange()"
                                                                    onkeypress="return onHandleKeyPress(event)"
                                                                    styleClass="id-page-form__field" />
                                                            </apex:panelGrid>
                                                            <apex:outputText id="login_mobile_phone_error"
                                                                styleClass="id-page-form__field-error " />
                                                            <apex:input id="login_international_mobile_phone"
                                                                value="{!client.login_international_mobile_phone}"
                                                                style="display: none" />
                                                        </apex:outputPanel>

                                                        <apex:outputLabel rendered="{! AND(isEmailFieldVisible, 
                                                                !fields['Login']['mobile_phone'].Is_Hidden__c)}"
                                                            value="{!$Label.IDENTITY_Registration_OR}"
                                                            styleClass="id-page-form__label id-page-form__label-or" />

                                                        <!-- EMAIL -->
                                                        <div class="id-page-form__email-wrap id-page-form__field-wrap">
                                                            <apex:outputLabel for="login_email"
                                                                value="{!IF(origin != 'lvconnect', $Label.IDENTITY_Registration_Email_Label , $Label.IDENTITY_LV_Connect_Reg_Email_label )}"
                                                                rendered="{! isEmailFieldVisible }"
                                                                styleClass="{!'id-page-form__label' +
                                                                                IF(fields['Login']['email'].Is_Required__c,' id-page-form__label_is-required','')
                                                                                }" />
                                                                    <apex:input id="login_email" value="{!client.login_email}"
                                                                        html-placeholder="{!$Label.IDENTITY_Registration_Email_Placeholder}"
                                                                        html-autocomplete="off"
                                                                        html-aria-required="{!fields['Login']['email'].Is_Required__c}"
                                                                        type="email"
                                                                        rendered="{! isEmailFieldVisible }"
                                                                        onblur="onLoginEmailChange('login_email')"
                                                                        onkeypress="return onHandleKeyPress(event)"
                                                                        html-aria-describedby="login_email_error"
                                                                        styleClass="id-page-form__field" 
                                                                        html-data-cs-mask=""/>
                                                                    <apex:outputText id="login_email_error"
                                                                        styleClass="{! 'id-page-form__field-error' + IF(country_local == 'cn' , ' test1', '')}" />
                                                        </div>

                                                        <!-- EMAIL Confirmation -->
                                                        <div class="id-page-form__field-wrap">
                                                            <apex:outputLabel for="login_email_confirmation"
                                                                value="{! IF(origin != 'lvconnect', $Label.IDENTITY_Registration_Email_Confirmation_Label, $Label.IDENTITY_LV_Connect_Reg_Email_Confirm_label)}"
                                                                rendered="{! !fields['Login']['email_confirmation'].Is_Hidden__c }"
                                                                styleClass="{!'id-page-form__label' +
                                                                                IF(fields['Login']['email_confirmation'].Is_Required__c,' id-page-form__label_is-required','')
                                                                                }" />
                
                                                            <apex:input id="login_email_confirmation"
                                                                html-placeholder="{!$Label.IDENTITY_Registration_Email_Placeholder}"
                                                                html-autocomplete="off"
                                                                html-aria-required="{!fields['Login']['email_confirmation'].Is_Required__c}"
                                                                type="email" value="{!client.login_email_confirmation}"
                                                                rendered="{! !fields['Login']['email_confirmation'].Is_Hidden__c }"
                                                                styleClass="id-page-form__field id-page-form__field_type_confirmation"
                                                                html-aria-describedby="login_email_confirmation_error"
                                                                onkeypress="return onHandleKeyPress(event)"
                                                                onkeyup="onLoginEmailConfirmationChange(event)"
                                                                html-data-cs-mask=""/>
                                                            <apex:outputText id="login_email_confirmation_error"
                                                                styleClass="id-page-form__field-error id-page-form__field-error_type_confirmation" />
                                                            
                                                        </div>
                                                        
                                                        <div class="registration-mandatory-container">
                                                            <apex:outputText value="{!$Label.IDENTITY_LV_Connect_Mandatory}"
                                                                             styleClass="id-page-form-popover__mandatory-label"
                                                                             rendered="{! origin == 'lvconnect' }"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                    <!-- SUBMIT -->
                                                    <div>
                                                        <apex:commandButton id="login_button" reRender=""
                                                            value="{!$Label.IDENTITY_Registration_Next_Button}"
                                                            styleClass="id-page-form__btn id-page-form__btn_full-width btn-on-bottom"
                                                            onclick="onLoginSectionSubmit(); return false;" oncomplete="">
                                                            <div id="login-section-loader" class="wrap-loading"
                                                                style="display:none">
                                                                <div id="jj" class="loading loading-1"></div>
                                                            </div>
                                                        </apex:commandButton>
                                                    </div>

                                                    <!-- LV CONNECT FOOTER -->
                                                    <apex:outputPanel layout="block" rendered="{! origin == 'lvconnect' }">
                                                        <div id="lv-connect-footer-wrapper">
                                                            <div class="title">{!$Label.IDENTITY_LV_Connect_Client_Service_Section_Title}</div>
                                                            <div class="phone-number">{!clientServicePhoneNumber}</div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    
                                                </apex:outputPanel>

                                                <!-- ****************************** PERSONAL SECTION ****************************** -->

                                                <apex:outputPanel layout="block" id="personal_section"
                                                    style="display: none"
                                                    styleClass="id-page-form__step id-page-form__step_num_2">

                                                    <h2 id="h2_personal" tabindex="-1">
                                                        <apex:outputText styleClass="id-page-form__section-title" value="{!
                                                                    IF( mode == 'ACTIVATION' && sub_mode == 'PARTIAL'&& origin != 'lvconnect' ,
                                                                        $Label.IDENTITY_Activation_Section_Title, 
                                                                        IF(origin == 'lvconnect',$Label.IDENTITY_LV_Connect_Password_Section_Title , 
                                                                                                 $Label.IDENTITY_Registration_Login_Section_Title))}
                                                                     {! IF(mode == 'ACTIVATION' && sub_mode == 'PARTIAL' && !isTrustOrigin && origin != 'lvconnect', '(1/2)', '')}" />
                                                        <apex:outputText styleClass="id-page-form__section-count"
                                                            rendered="{!(mode != 'ACTIVATION' || sub_mode != 'PARTIAL') && origin != 'lvconnect' }" />
                                                    </h2>
                                                    <!--ACTIVATION HIDDEN -->
                                                    <apex:inputText id="activation_client_encrypted" style="display: none"
                                                    value="{!activation_client_encrypted}" rendered="{! mode == 'ACTIVATION'}"/>
                                                    <div class="id-page-form__section">

                                                        <!-- PASSWORD FORM -->
                                                        <div title="{!$Label.IDENTITY_Registration_Login_Section_Title}"
                                                            class="id-page-form__field-wrap">

                                                            <apex:outputText id="section_description"
                                                                rendered="{! mode == 'ACTIVATION' && sub_mode == 'PARTIAL'}"
                                                                styleClass="id-page-form__section-subtitle"
                                                                escape="false" />

                                                            <!-- PASSWORD -->
                                                            <div class="id-page-form__password-label"
                                                                id="idPpasswordLabel">
                                                                <apex:outputLabel for="password"
                                                                    styleClass="id-page-form__label id-page-form__password-label id-page-form__label_is-required"
                                                                    value="{!$Label.IDENTITY_Registration_Password_Label}">
                                                                </apex:outputLabel>
                                                            </div>
                                                            <div class="input-password-container">
                                                            <apex:inputText id="password" maxlength="{! passwordMaxlength }"
                                                                styleClass="id-page-form__field id-page-form__field_type_password"
                                                                html-autocomplete="off" html-aria-required="true"
                                                                value="{! client.password }" onkeyup="onPasswordKeyup()"
                                                                onchange="onPasswordChange()"
                                                                onfocus="onPasswordFocus()" onblur="onPasswordBlur()"
                                                                onkeypress="return onHandleKeyPress(event)"
                                                                html-aria-describedby="password_error" tabindex="2" 
                                                                html-data-cs-mask=""/>
                                                            <div class="id-page-form__show-pass-btn-wrap">
                                                                <button type="button"
                                                                    class="id-page-form__show-pass-btn"
                                                                    id="password_btn" onclick="onDisplayPasswordClick()"
                                                                    onblur="onPasswordBlur()" tabindex="3"></button>
                                                            </div>
                                                            </div>
                                                            <div id="div_password_error" tabindex="-1" class="divErr">
                                                                <apex:outputText id="password_error"
                                                                    styleClass="id-page-form__field-error" />
                                                            </div>
                                                            <!-- PASSWORD RULES -->
                                                            <div id='password_rules' style="display: none">
                                                                <p class="id-page-form__password-policy">
                                                                    {! $Label.IDENTITY_Registration_Password_Policy_Label}
                                                                </p>
                                                                <ul class="id-page-form__password-rules">
                                                                    <li id="password-rule-1"
                                                                        class="id-page-form__password-rule">
                                                                        {!$Label.IDENTITY_Registration_Password_Policy_Rule_1}
                                                                    </li>
                                                                    <li id="password-rule-2"
                                                                        class="id-page-form__password-rule">
                                                                        {!$Label.IDENTITY_Registration_Password_Policy_Rule_2}
                                                                    </li>
                                                                    <li id="password-rule-3"
                                                                        class="id-page-form__password-rule">
                                                                        {!$Label.IDENTITY_Registration_Password_Policy_Rule_3}
                                                                    </li>
                                                                    <li id="password-rule-4"
                                                                        class="id-page-form__password-rule">
                                                                        {!$Label.IDENTITY_Registration_Password_Policy_Rule_4}
                                                                    </li>
                                                                    <li id="password-rule-6"
                                                                        class="id-page-form__password-rule">
                                                                        {!$Label.IDENTITY_Registration_Password_Policy_Rule_6}
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <apex:outputPanel rendered="{! mode != 'ACTIVATION' || sub_mode != 'PARTIAL' }">
                                                        <h2>
                                                            <apex:outputText styleClass="id-page-form__section-title"
                                                                             value="{!IF(origin != 'lvconnect', $Label.IDENTITY_Registration_Personal_Section_Title,
                                                                                    $Label.IDENTITY_LV_Connect_Personal_Infos_Section_Title)}" />
                                                        </h2>
                                                        <div class="id-page-form__section">
                                                            <!-- PERSONAL FORM -->
                                                            <apex:outputPanel id="personalForm"
                                                                title="{!$Label.IDENTITY_Registration_Personal_Section_Title}">
                                                                <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                                    rendered="{! (mode == 'ACTIVATION' && client_origin.title == '') || mode != 'ACTIVATION'}"
                                                                    layout="block">
                                                                    <apex:outputLabel for="title"
                                                                        value="{!IF( origin != 'lvconnect', $Label.IDENTITY_Registration_Title_Label,
                                                                               $Label.IDENTITY_LV_Connect_Reg_Civility_label)}"
                                                                        rendered="{! !fields['Personal']['title'].Is_Hidden__c }"
                                                                        styleClass="{!'id-page-form__label' +
                                                                                        IF(fields['Personal']['title'].Is_Required__c,' id-page-form__label_is-required','')
                                                                                        }" />
                                                                    <apex:selectList id="title" size="1"
                                                                        value="{! client.title }"
                                                                        html-placeholder="{!$Label.IDENTITY_Registration_Title_Placeholder}"
                                                                        html-aria-describedby="title_error"
                                                                        html-aria-required="{!fields['Personal']['title'].Is_Required__c}"
                                                                        html-data-cs-mask=""
                                                                        rendered="{! !fields['Personal']['title'].Is_Hidden__c }"
                                                                        onblur="onTitleChange()"
                                                                        styleClass="id-page-form__select-title select-registration id-page-form__select "
                                                                        tabindex="4">
                                                                        <apex:selectOptions value="{! Titles }" />
                                                                    </apex:selectList>
                                                                    <div id="div_title_error" tabindex="-1" class="divErr">
                                                                        <apex:outputText id="title_error"
                                                                            styleClass="id-page-form__field-error" />
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" id="names"
                                                                    styleClass="{!'id-page-form__fields' +
                                                                                    IF( country_local == 'cn' || country_local == 'kr' || country_local == 'jp' || country_local == 'tw',' id-page-form__fields_reverse','')}">
                                                                    <!-- FIRSTNAME -->
                                                                    <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                                        rendered="{! (mode == 'ACTIVATION' && client_origin.firstname == '') || mode != 'ACTIVATION'}"
                                                                        layout="block">
                                                                        <apex:outputLabel for="firstname"
                                                                            value="{! IF(origin != 'lvconnect', $Label.IDENTITY_Registration_FirstName_Label , $Label.IDENTITY_LV_Connect_Reg_Firstname_label)}"
                                                                            rendered="{! !fields['Personal']['firstname'].Is_Hidden__c }"
                                                                            styleClass="{!'id-page-form__label' +
                                                                                            IF(fields['Personal']['firstname'].Is_Required__c,' id-page-form__label_is-required','')}" />
                                                                        <apex:inputText id="firstname"
                                                                            value="{! client.firstname }" maxlength="{! fields['Settings']['name_max_length'].Value__c }"
                                                                            rendered="{! !fields['Personal']['firstname'].Is_Hidden__c }"
                                                                            html-aria-describedby="firstname_error"
                                                                            html-aria-required="{!fields['Personal']['firstname'].Is_Required__c}"
                                                                            styleClass="id-page-form__field"
                                                                            onchange="onFirstnameChange()"
                                                                            onkeypress="return onHandleKeyPress(event, 'alpha')"
                                                                            tabindex="{! IF( country_local == 'cn' || country_local == 'kr' || country_local == 'jp' || country_local == 'tw',6,5)}"
                                                                            html-data-cs-mask=""/>
                                                                        <div id="div_firstname_error" tabindex="-1"
                                                                            class="divErr">
                                                                            <apex:outputText id="firstname_error"
                                                                                styleClass="id-page-form__field-error" />
                                                                        </div>
                                                                    </apex:outputPanel>

                                                                    <!-- LASTNAME -->
                                                                    <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                                        rendered="{! (mode == 'ACTIVATION' && client_origin.lastname == '') || mode != 'ACTIVATION'}"
                                                                        layout="block">
                                                                        <apex:outputLabel for="lastname"
                                                                            value="{!IF(origin != 'lvconnect', $Label.IDENTITY_Registration_Lastname_Label , $Label.IDENTITY_LV_Connect_Reg_Lastname_label)}"
                                                                            rendered="{! !fields['Personal']['lastname'].Is_Hidden__c }"
                                                                            styleClass="{!'id-page-form__label' +
                                                                                            IF(fields['Personal']['lastname'].Is_Required__c,' id-page-form__label_is-required','')
                                                                                            }" />
                                                                        <apex:inputText id="lastname"
                                                                            value="{! client.lastname }" maxlength="{! fields['Settings']['name_max_length'].Value__c }"
                                                                            rendered="{! !fields['Personal']['lastname'].Is_Hidden__c }"
                                                                            styleClass="id-page-form__field"
                                                                            onchange="onLastnameChange()"
                                                                            onkeypress="return onHandleKeyPress(event, 'alpha')"
                                                                            html-aria-describedby="lastname_error"
                                                                            html-aria-required="{!fields['Personal']['lastname'].Is_Required__c}"
                                                                            tabindex="{! IF( country_local == 'cn' || country_local == 'kr' || country_local == 'jp' || country_local == 'tw',5,6)}" 
                                                                            html-data-cs-mask=""/>
                                                                        <div id="div_lastname_error" tabindex="-1"
                                                                            class="divErr">
                                                                            <apex:outputText id="lastname_error"
                                                                                styleClass="id-page-form__field-error" />
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>

                                                                <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                                    rendered="{! !fields['Personal']['lastname2'].Is_Hidden__c &&
                                                                            ((mode == 'ACTIVATION' && client_origin.lastname2 == '') || mode != 'ACTIVATION')}"
                                                                    layout="block">
                                                                    <!-- LASTNAME KANA -->
                                                                    <apex:outputLabel for="lastname2"
                                                                        value="{!$Label.IDENTITY_Registration_Lastname_Kana_Label}"
                                                                        rendered="{! !fields['Personal']['lastname2'].Is_Hidden__c }"
                                                                        styleClass="{!'id-page-form__label' +
                                                                                        IF(fields['Personal']['lastname2'].Is_Required__c,' id-page-form__label_is-required','')
                                                                                        }" />
                                                                    <apex:inputText id="lastname2"
                                                                        value="{! client.lastname2 }" maxlength="40"
                                                                        rendered="{! !fields['Personal']['lastname2'].Is_Hidden__c }"
                                                                        styleClass="id-page-form__field"
                                                                        onchange="onLastname2Change()"
                                                                        onkeypress="return onHandleKeyPress(event, 'kana')"
                                                                        html-aria-describedby="lastname2_error"
                                                                        html-aria-required="{!fields['Personal']['lastname2'].Is_Required__c}" 
                                                                        html-data-cs-mask=""/>
                                                                    <div id="div_lastname2_error" tabindex="-1"
                                                                        class="divErr">
                                                                        <apex:outputText id="lastname2_error"
                                                                            styleClass="id-page-form__field-error" />
                                                                    </div>
                                                                </apex:outputPanel>

                                                                <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                                    rendered="{! !fields['Personal']['firstname2'].Is_Hidden__c &&
                                                                            ((mode == 'ACTIVATION' && client_origin.firstname2 == '') || mode != 'ACTIVATION')}"
                                                                    layout="block">
                                                                    <!-- FIRSTNAME KANA -->
                                                                    <apex:outputLabel for="firstname2"
                                                                        value="{!$Label.IDENTITY_Registration_Firstname_Kana_Label}"
                                                                        rendered="{! !fields['Personal']['firstname2'].Is_Hidden__c }"
                                                                        styleClass="{!'id-page-form__label' +
                                                                                        IF(fields['Personal']['firstname2'].Is_Required__c,' id-page-form__label_is-required','')}" />
                                                                    <apex:inputText id="firstname2"
                                                                        value="{! client.firstname2 }" maxlength="40"
                                                                        rendered="{! !fields['Personal']['firstname2'].Is_Hidden__c }"
                                                                        styleClass="id-page-form__field"
                                                                        onchange="onFirstname2Change()"
                                                                        onkeypress="return onHandleKeyPress(event, 'kana')"
                                                                        html-aria-describedby="firstname2_error"
                                                                        html-aria-required="{!fields['Personal']['firstname2'].Is_Required__c}" 
                                                                        html-data-cs-mask=""/>
                                                                    <div id="div_firstname2_error" tabindex="-1"
                                                                        class="divErr">
                                                                        <apex:outputText id="firstname2_error"
                                                                            styleClass="id-page-form__field-error" />
                                                                    </div>
                                                                </apex:outputPanel>

                                                                <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                                    rendered="{! !fields['Personal']['country'].Is_Hidden__c &&
                                                                            ((mode == 'ACTIVATION' && client_origin.country == '') || mode != 'ACTIVATION')}"
                                                                    layout="block" style="{!IF(hideCountryList,'display:none;','')}">
                                                                    <!-- COUNTRY -->
                                                                    <apex:outputLabel for="country"
                                                                        value="{! IF(origin != 'lvconnect', $Label.IDENTITY_Registration_Country_Label , $Label.IDENTITY_LV_Connect_Reg_Country_label)}"
                                                                        rendered="{! !fields['Personal']['country'].Is_Hidden__c }"
                                                                        styleClass="{!'id-page-form__label' +
                                                                                        IF(fields['Personal']['lastname'].Is_Required__c,' id-page-form__label_is-required','')
                                                                                        }" />
                                                                    <select id="country" size="1"
                                                                        class="id-page-form__select-country select-registration id-page-form__select"
                                                                        onblur="onCountryChange()"
                                                                        aria-required="{!fields['Personal']['country'].Is_Required__c}">
                                                                        <apex:outputPanel layout="block"
                                                                            rendered="{! country_local == 'e1' }">
                                                                            <option value="{!'null'}">
                                                                                {!$Label.IDENTITY_Registration_Country_Default_Value}
                                                                            </option>
                                                                        </apex:outputPanel>
                                                                        <apex:repeat value="{!countries_values}"
                                                                            var="option">
                                                                            <option value="{!option.Iso2Code__c}">
                                                                                <apex:outputText value="{!option.Picklist__c}" />
                                                                            </option>
                                                                        </apex:repeat>
                                                                    </select>
                                                                    <apex:inputHidden value="{! client.country }"
                                                                        id="client_country" />
                                                                    <div id="div_country_error" tabindex="-1"
                                                                        class="divErr">
                                                                        <apex:outputText id="country_error"
                                                                            styleClass="id-page-form__field-error" />
                                                                    </div>

                                                                </apex:outputPanel>
                                                                <!-- EMAIL -->
                                                                <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                                    rendered="{! !fields['Personal']['email'].Is_Hidden__c &&
                                                                            ((mode == 'ACTIVATION' && client_origin.email == '') || mode != 'ACTIVATION')}"
                                                                    layout="block">
                                                                    <apex:outputLabel for="email"
                                                                        value="{!$Label.IDENTITY_Registration_Email_Label}"
                                                                        rendered="{! !fields['Personal']['email'].Is_Hidden__c }"
                                                                        styleClass="{!'id-page-form__label' +
                                                                                        IF(fields['Personal']['email'].Is_Required__c,' id-page-form__label_is-required','')
                                                                                        }" />
                                                                    <apex:inputText id="email" value="{! client.email }"
                                                                        html-placeholder="{!$Label.IDENTITY_Registration_Email_Placeholder}"
                                                                        rendered="{! !fields['Personal']['email'].Is_Hidden__c }"
                                                                        onblur="onEmailChange()"
                                                                        styleClass="id-page-form__field"
                                                                        onkeypress="return onHandleKeyPress(event)"
                                                                        html-aria-describedby="email_error"
                                                                        html-aria-required="{!fields['Personal']['email'].Is_Required__c}" />
                                                                    <div id="div_email_error" tabindex="-1" class="divErr">
                                                                        <apex:outputText id="email_error"
                                                                            styleClass="id-page-form__field-error" />
                                                                    </div>
                                                                </apex:outputPanel>

                                                                 <!-- BIRTHDATE -->
                                                                <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                                rendered="{! !fields['Personal']['birthdate'].Is_Hidden__c &&
                                                                        ((mode == 'ACTIVATION' && ISBLANK(client_origin.birthdate)) || mode != 'ACTIVATION')}"
                                                                layout="block">
                                                           
                                                                <apex:outputLabel for="birthdate"
                                                                    value="{!$Label.IDENTITY_Registration_Birthdate_Label}"
                                                                    rendered="{! !fields['Personal']['birthdate'].Is_Hidden__c }"
                                                                    styleClass="{!'id-page-form__label' +
                                                                        IF(fields['Personal']['birthdate'].Is_Required__c,
                                                                        ' id-page-form__label_is-required',
                                                                        ' id-page-form__label_is-optional')}" />   
                                                                        <apex:input id="birthdate" 
                                                                            value="{! client.birthdate }" 
                                                                            type="date" 
                                                                            rendered="{! !fields['Personal']['birthdate'].Is_Hidden__c }"
                                                                            html-aria-describedby="birthdate_error"
                                                                            html-aria-required="{!fields['Personal']['birthdate'].Is_Required__c}"
                                                                            styleClass="id-page-form__field"
                                                                            onchange="onBirthdateChange()"
                                                                            html-data-cs-mask=""/>
                                                                        <div id="div_birthdate_error" tabindex="-1"
                                                                            class="divErr">
                                                                        <apex:outputText id="birthdate_error"
                                                                            styleClass="id-page-form__field-error" />
                                                                    </div>
                                                                </apex:outputPanel>

                                                                <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                                    rendered="{! !fields['Personal']['mobile_phone'].Is_Hidden__c &&
                                                                            ((mode == 'ACTIVATION' && account_activation != null && account_activation.LocalMobilePhone__pc == '') || mode != 'ACTIVATION')}"
                                                                    layout="block">
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                          
                                                        </div>
                                                        <div class="registration-mandatory-container">
                                                                <apex:outputText value="{!$Label.IDENTITY_LV_Connect_Mandatory}"
                                                                                 styleClass="id-page-form-popover__mandatory-label"
                                                                                 rendered="{! origin == 'lvconnect' }"/>
                                                          </div>
                                                    </apex:outputPanel>

                                                    <!-- KR - ADD ADDRESS BUTTON -->
                                                    <apex:outputPanel id="korea_address_button_panel" styleClass="loader-container"
                                                        style="{! IF(!koreaAddressFields && korea_lang_country && mode != 'ACTIVATION', 'display:block;', 'display:none;')}">
                                                        <div>
                                                            <apex:commandButton id="korea_address_button" 
                                                                action="{!changeKoreaFields}"
                                                                onclick="clearKRFieldsData();"
                                                                oncomplete="focusKRFields()"
                                                                rerender="korea_address_phone_field,korea_address_button_panel"
                                                                value="+ {!$Label.IDENTITY_Registration_Korea_address_Button}"
                                                                styleClass="id-page-form__btn-add-address id-page-form__btn_full-width btn-on-bottom">
                                                                
                                                                <!-- POPOVER LOADER -->
                                                                <div id="popover-kr-loader" class=" wrap-loading-kr " style="display:none">
                                                                    <div class="loading loading-kr"></div>
                                                                </div>
                                                            </apex:commandButton>
                                                        </div>
                                                    </apex:outputPanel>
                                                    
                                                    
                                                <!-- KR - FIELDS PANEL -->
                                                <apex:outputPanel id="korea_address_phone_field"   
                                                    style="{!IF(koreaAddressFields, 'display:block;' ,  'display:none;')}">
                                                    
                                                    <div id="addressPhoneSection" class="id-page-form__section" style="" >
                                                        <!-- CROSS BUTTON FOR CANCEL ADD ADDRESS -->
                                                        <div class="cross-button-loader-container">
                                                            <div class="cross-button-loader">
                                                            <apex:commandButton id="korea_address_cancel_button" 
                                                                action="{!changeKoreaFields}" 
                                                                onclick="clearKRFieldsData();"
                                                                oncomplete=""
                                                                value="X"
                                                                rerender="korea_address_button_panel,korea_address_phone_field"
                                                                styleClass="id-page-form__close_btn">
                                                               
                                                                <!-- POPOVER LOADER -->
                                                                <div id="popover-kor-loader" class="wrap-loading-cross-btn" style="display:none">
                                                                    <div class="loading loading-kor"></div>
                                                                </div>
                                                                
                                                            </apex:commandButton>
                                                        </div>
                                                        </div>
                                                  
                                                        <!-- 1. POSTAL CODE FIELD -->
                                                        <div id="div_postal_code" class="postal-code-field">
                                                            <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                                rendered="{!((mode == 'ACTIVATION' && ISBLANK(client_origin.postal_code)) || mode != 'ACTIVATION')}"
                                                                layout="block">

                                                                <apex:outputLabel for="postal_code"
                                                                    value="{!$Label.IDENTITY_Registration_Postal_Code_Label}"
                                                                    styleClass="{!'id-page-form__label id-page-form__label_is-optional'}" />

                                                                <div class="postal-code-and-juso">
                                                                    <div class="postal-code-input">
                                                                        <apex:inputText id="postal_code" 
                                                                        value="{! client.postal_code }" 
                                                                        maxlength="10"
                                                                        html-aria-describedby="postal_code_error"
                                                                        onkeypress="return onHandleKeyPress(event)"
                                                                        styleClass="id-page-form__field"
                                                                        onchange="onPostalCodeChange()" 
                                                                        html-data-cs-mask=""/>
                                                                    </div>
                                                                    

                                                                    <div class="juso-add-address-button">
                                                                        <apex:commandButton id="korea_address_button_juso"                 
                                                                            value="{!$Label.IDENTITY_Registration_Juso_Button}"
                                                                            onclick="{openSearchAdressPopup()}"
                                                                            rerender="juso-add-address-button"
                                                                            styleClass="id-page-form__btn-add-address-juso btn-on-bottom">
                                                                        </apex:commandButton>
                                                                    </div>
                                                                </div>

                                                                <div id="div_postal_code_error" tabindex="-1" class="divErr">
                                                                    <apex:outputText id="postal_code_error" styleClass="id-page-form__field-error" />
                                                                </div>
                                                            </apex:outputPanel>


                                                            <apex:outputLabel styleClass="id-page-form__postal-code-label"
                                                                value="{!$Label.IDENTITY_Registration_Text_Under_Postal_Code_Label}">
                                                            </apex:outputLabel>
                                                        </div>

                                                        <!-- 2. STATE FIELD -->
                                                        <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                            rendered="{!((mode == 'ACTIVATION' && ISBLANK(client_origin.state)) || mode != 'ACTIVATION')}"
                                                            layout="block">
                                                            <apex:outputLabel for="state"
                                                                value="{!$Label.IDENTITY_Registration_State_Label}"
                                                                styleClass="{!'id-page-form__label id-page-form__label_is-optional'}" />   
                                                            <apex:input id="state" 
                                                                value="{! client.state }" 
                                                                html-aria-describedby="state_error"
                                                                styleClass="id-page-form__field"
                                                                onchange="onStateChange()"
                                                                html-data-cs-mask=""/>
                                                            <div id="div_state_error" tabindex="-1" class="divErr">
                                                                <apex:outputText id="state_error"
                                                                    styleClass="id-page-form__field-error" />
                                                            </div>
                                                        </apex:outputPanel>


                                                        <!-- 3. CITY FIELD -->
                                                        <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                            rendered="{!((mode == 'ACTIVATION' && ISBLANK(client_origin.city)) || mode != 'ACTIVATION')}"
                                                            layout="block">
                                                            <apex:outputLabel for="city"
                                                                value="{!$Label.IDENTITY_Registration_City_Label}"
                                                                styleClass="{!'id-page-form__label id-page-form__label_is-optional'}" />   
                                                            <apex:inputText id="city" 
                                                                value="{! client.city }" 
                                                                maxlength="30"
                                                                html-aria-describedby="city_error"
                                                                styleClass="id-page-form__field"
                                                                onchange="onCityChange()" 
                                                                html-data-cs-mask=""/>
                                                            <div id="div_city_error" tabindex="-1" class="divErr">
                                                                <apex:outputText id="city_error" styleClass="id-page-form__field-error" />
                                                            </div>
                                                        </apex:outputPanel>


                                                        <!-- 4. ADDRESS-1 FIELD -->
                                                        <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                            rendered="{! ((mode == 'ACTIVATION' && ISBLANK(client_origin.address1)) || mode != 'ACTIVATION')}"
                                                            layout="block">
                                                            <apex:outputLabel for="address1"
                                                                value="{!$Label.IDENTITY_Registration_Address1_Label}"
                                                                styleClass="{!'idfm-page-form__label id-page-form__label_is-optional'}" />   
                                                            <apex:inputText id="address1" 
                                                                value="{! client.address1 }" 
                                                                maxlength="40"
                                                                html-aria-describedby="address1_error"
                                                                styleClass="id-page-form__field"
                                                                onchange="onAddress1Change()" 
                                                                html-data-cs-mask=""/>
                                                            <div id="div_address1_error" tabindex="-1" class="divErr">
                                                                <apex:outputText id="address1_error" styleClass="id-page-form__field-error" />
                                                            </div>
                                                        </apex:outputPanel>


                                                        <!-- 5. ADDRESS-2 FIELD -->
                                                        <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                            rendered="{! ((mode == 'ACTIVATION' && ISBLANK(client_origin.address2)) || mode != 'ACTIVATION')}"
                                                            layout="block">
                                                            <apex:outputLabel for="address2"
                                                                value="{!$Label.IDENTITY_Registration_Address2_Label}"
                                                                styleClass="{!'id-page-form__label id-page-form__label_is-optional'}" />    
                                                            <apex:inputText id="address2" 
                                                                value="{! client.address2 }" 
                                                                maxlength="40"
                                                                html-aria-describedby="address2_error"
                                                                styleClass="id-page-form__field"
                                                                onchange="onAddress2Change()" 
                                                                html-data-cs-mask=""/>
                                                            <div id="div_address2_error" tabindex="-1" class="divErr">
                                                                <apex:outputText id="address2_error" styleClass="id-page-form__field-error" />
                                                            </div>
                                                        </apex:outputPanel>

                                                        
                                                        <!-- 6. ADDRESS-3 FIELD -->
                                                        <apex:outputPanel styleClass="id-page-form__field-wrap"
                                                            rendered="{! ((mode == 'ACTIVATION' && ISBLANK(client_origin.address3)) || mode != 'ACTIVATION')}"
                                                            layout="block">
                                                            <apex:outputLabel for="address3"
                                                                value="{!$Label.IDENTITY_Registration_Address3_Label}"
                                                                styleClass="{!'id-page-form__label id-page-form__label_is-optional'}" /> 
                                                            <apex:inputText id="address3" 
                                                                maxlength="40"
                                                                value="{! client.address3 }" 
                                                                html-aria-describedby="address3_error"
                                                                styleClass="id-page-form__field"
                                                                onchange="onAddress3Change()" 
                                                                html-data-cs-mask=""/>
                                                            <div id="div_address3_error" tabindex="-1" class="divErr">
                                                                <apex:outputText id="address3_error" styleClass="id-page-form__field-error" />
                                                            </div>
                                                        </apex:outputPanel>

                                                        
                                                        <!-- 7. MOBILE PHONE -->
                                                        <apex:outputLabel for="mobile_phone"
                                                            value="{!$Label.IDENTITY_Registration_Mobile_Phone_Label}"
                                                            rendered="{! !fields['Personal']['mobile_phone'].Is_Hidden__c }"
                                                            styleClass="{!'id-page-form__label' + IF(fields['Personal']['mobile_phone'].Is_Required__c,' id-page-form__label_is-required',' id-page-form__label_is-optional')}" />
                                                        <apex:panelGrid columns="2"
                                                            rendered="{! !fields['Personal']['mobile_phone'].Is_Hidden__c }"
                                                            styleClass="id-page-form__select-grid"
                                                            html-role="presentation">
                                                            <apex:selectList size="1" id="calling_code"
                                                                value="{! client.calling_code }"
                                                                title="{!$Label.IDENTITY_Registration_Calling_Code_Title}"
                                                                styleClass="id-page-form__select id-page-form__select_is-valid"
                                                                onchange="onCallingCodeChange()">
                                                                <apex:selectOptions value="{! CallingCodes }" />
                                                            </apex:selectList>
                                                            <apex:inputText id="mobile_phone"
                                                                value="{! client.mobile_phone }" 
                                                                onchange="onMobilePhoneChange()"
                                                                maxlength="11"
                                                                styleClass="id-page-form__field"
                                                                onkeypress="return onHandleKeyPress(event, 'numeric')"
                                                                html-aria-describedby="mobile_phone_error"
                                                                html-aria-required="{!fields['Personal']['mobile_phone'].Is_Required__c}" />
                                                        </apex:panelGrid>
                                                        <div id="div_mobile_phone_error" tabindex="-1" class="divErr">
                                                            <apex:outputText id="mobile_phone_error" styleClass="id-page-form__field-error" />
                                                        </div>
                                                        <apex:input id="international_mobile_phone"
                                                            value="{!client.international_mobile_phone}"
                                                            style="display: none" />
                                                        <apex:outputLabel styleClass="id-page-form__label"
                                                            value="{!$Label.IDENTITY_Registration_Phone_Example_Label}">
                                                        </apex:outputLabel>
                                                    
                                                    </div>
                                                </apex:outputPanel>


                                                    <apex:outputPanel rendered="{! origin != 'checkout' || (origin == 'checkout' && !fields['Personal']['privacy_agreement'].Is_Hidden__c) }">
                                                        <div class="newsletter-section id-page-form__section ">
                                                            <!-- NEWSLETTER AGREEMENT -->
                                                            <apex:outputPanel id="newsletterAgreementCheckbox"
                                                                rendered="{! !fields['Personal']['newsletter_agreement'].Is_Hidden__c }"
                                                                styleClass="id-page-form__checkbox-field newscheckbox">
                                                                <div class="stylish-checkbox">
                                                                    <apex:inputCheckbox id="newsletter_agreement"
                                                                        value="{! client.newsletter_agreement }"
                                                                        onkeypress="return handleCheckboxEnter(event, 'newsletter_agreement')"
                                                                        onclick="onNewsletterAgreementChange(true)"
                                                                        html-aria-describedby="newsletter_agreement_error"
                                                                        html-aria-required="{!fields['Personal']['newsletter_agreement'].Is_Required__c}" />
                                                                </div>
                                                                <apex:outputLabel for="newsletter_agreement" escape="false"
                                                                    value="{!IF(origin == 'lvapp', SUBSTITUTE($Label.IDENTITY_Registration_Newsletter_Agreement, '<a href=\"\" id=\"privacyPolicyModalTrigger\">', privacyPolicyLink), $Label.IDENTITY_Registration_Newsletter_Agreement )}"
                                                                    styleClass="{!IF(fields['Personal']['newsletter_agreement'].Is_Required__c,
                                                                                    ' id-page-form__label_is-required','')
                                                                                    } id-page-form__label-checkbox" />
                                                                <div id="div_newsletter_agreement_error" tabindex="-1"
                                                                    class="divErr">
                                                                    <apex:outputText id="newsletter_agreement_error"
                                                                        styleClass="id-page-form__field-error id-page-form__checkbox-field-error" />
                                                                </div>
                                                            </apex:outputPanel>

                                                            <!-- PRIVACY POLICY AGREEMENT -->
                                                            <apex:outputPanel id="privacyAgreementCheckbox"
                                                                rendered="{! !fields['Personal']['privacy_agreement'].Is_Hidden__c}"
                                                                styleClass="id-page-form__checkbox-field">
                                                                <div class="stylish-checkbox">
                                                                    <apex:inputCheckbox id="privacy_agreement"
                                                                        value="{! client.privacy_agreement }"
                                                                        onclick="onPrivacyAgreementChange()"
                                                                        onkeypress="return handleCheckboxEnter(event, 'privacy_agreement')"
                                                                        html-aria-describedby="privacy_agreement_error"
                                                                        html-aria-required="{!fields['Personal']['privacy_agreement'].Is_Required__c}" />
                                                                </div>
                                                                <apex:outputLabel for="privacy_agreement" escape="false"
                                                                value="{!IF(origin == 'lvapp', SUBSTITUTE($Label.IDENTITY_Registration_Privacy_Policy_Agreement, '<a href=\"\" id=\"privacyPolicyModalTrigger\">', privacyPolicyLink), $Label.IDENTITY_Registration_Privacy_Policy_Agreement )}"
                                                                    styleClass="{!IF(fields['Personal']['privacy_agreement'].Is_Required__c,
                                                                                    ' id-page-form__label_is-required','')
                                                                                    } id-page-form__label-checkbox" />
                                                                <div id="div_privacy_agreement_error" tabindex="-1"
                                                                    class="divErr">
                                                                    <apex:outputText id="privacy_agreement_error"
                                                                        styleClass="id-page-form__field-error id-page-form__checkbox-field-error" />
                                                                </div>

                                                            </apex:outputPanel>
                                                            
                                                            <!-- CHINA CBDT AGREEMENT -->
                                                            <apex:outputPanel id="cbdtAgreementCheckbox"
                                                                rendered="{! country_local == 'cn' }"
                                                                styleClass="id-page-form__checkbox-field">
                                                                <div class="stylish-checkbox">
                                                                    <apex:inputCheckbox id="cbdt_agreement"
                                                                        
                                                                        onclick="onCbdtAgreementChange()"
                                                                        onkeypress="return handleCheckboxEnter(event, 'cbdt_agreement')"
                                                                        html-aria-describedby="cbdt_agreement_error"
                                                                        html-aria-required="true" />
                                                                </div>
                                                                <apex:outputLabel for="cbdt_agreement" escape="false"
                                                                    value="{!$Label.IDENTITY_Registration_Disclaimer}"
                                                                    styleClass=" id-page-form__label-checkbox" />
                                                                <div id="div_cbdt_agreement_error" tabindex="-1"
                                                                    class="divErr">
                                                                    <apex:outputText id="cbdt_agreement_error"
                                                                        styleClass="id-page-form__field-error id-page-form__checkbox-field-error" />
                                                                </div>
                                                            </apex:outputPanel>

                                                            <!-- CHINA 14 YEARS OLD CONFIRMATION -->
                                                            <apex:outputPanel id="ageConfirmationCheckbox"
                                                                rendered="{! country_local == 'cn' }"
                                                                styleClass="id-page-form__checkbox-field">
                                                                <div class="stylish-checkbox">
                                                                    <apex:inputCheckbox id="age_confirmation"
                                                                        onclick="onAgeConfirmationChange()"
                                                                        onkeypress="return handleCheckboxEnter(event, 'age_confirmation')"
                                                                        html-aria-describedby="age_confirmation_error"
                                                                        html-aria-required="true" />
                                                                </div>
                                                                <apex:outputLabel for="age_confirmation" escape="false"
                                                                    value="{!$Label.IDENTITY_Registration_14_years_old}"
                                                                    styleClass="id-page-form__label_is-required id-page-form__label-checkbox" />
                                                                <div id="div_age_confirmation_error" tabindex="-1"
                                                                    class="divErr">
                                                                    <apex:outputText id="age_confirmation_error"
                                                                        styleClass="id-page-form__field-error id-page-form__checkbox-field-error" />
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </apex:outputPanel>

                                                    <!-- SUBMIT -->
                                                    <div class="checkout">
                                                        <apex:commandButton rendered="{! origin == 'checkout' }" action="{! logout }" value="{! IF( checkoutPreviousPage == 'identification', $Label.IDENTITY_Activation_Modify_Email_Button, $Label.IDENTITY_Activation_Cancel_Button) }" 
                                                            id="modify_email_button" styleClass="id-page-form__btn id-page-form__btn_full-width">
                                                        </apex:commandButton>
                                                        
                                                        <apex:commandButton rendered="{! origin != 'lvconnect' }" onclick="onPersonalSectionSubmit(); return false;"
                                                            id="personal_button" reRender="" oncomplete="" value="{!
                                                                        IF( mode == 'ACTIVATION' && sub_mode == 'PARTIAL',
                                                                            $Label.IDENTITY_Activation_Confirm_Button,
                                                                            $Label.IDENTITY_Registration_Next_Button
                                                                        )}"
                                                            styleClass="id-page-form__btn id-page-form__btn_full-width">
                                                        </apex:commandButton>

                                                        <apex:commandButton rendered="{! origin == 'lvconnect' }" onclick="onPersonalSectionSubmit(); return false;"
                                                            id="personal_button2" reRender="" oncomplete="" value="{!
                                                                        IF( mode == 'ACTIVATION' && sub_mode == 'PARTIAL',
                                                                            $Label.IDENTITY_Activation_Confirm_Button,
                                                                            $Label.IDENTITY_Registration_Next_Button
                                                                        )}"
                                                            styleClass="id-page-form__btn id-page-form__btn_full-width">
                                                            <div id="personal-section-loader" class="wrap-loading"
                                                                style="display:none">
                                                                <div id="jj" class="{! IF(origin != 'lvconnect' , '' , 'loading-2 ')} loading loading-1 "></div>
                                                            </div>
                                                        </apex:commandButton>
                                                    </div>                                                    

                                                    <!-- LV CONNECT FOOTER -->
                                                    <apex:outputPanel layout="block" rendered="{! origin == 'lvconnect' }">
                                                        <div id="lv-connect-footer-wrapper">
                                                            <div class="title">{!$Label.IDENTITY_LV_Connect_Client_Service_Section_Title}</div>
                                                            <div class="phone-number">{!clientServicePhoneNumber}</div>
                                                        </div>
                                                    </apex:outputPanel>

                                                    <div class="id-page-form__footer">
                                                        <!-- NOTIFICATION -->
                                                        <apex:outputText rendered="{! isEmailFieldVisible }"
                                                            value="{! IF( mode != 'ACTIVATION' && sub_mode != 'PARTIAL', $Label.IDENTITY_Registration_Email_Verification_Notification,'')}"
                                                            styleClass="id-page-form__verify-notice" />
                                                        <apex:outputText rendered="{! !fields['Login']['mobile_phone'].Is_Hidden__c }"
                                                            value="{!$Label.IDENTITY_Registration_SMS_Verification_Notification}"
                                                            styleClass="id-page-form__verify-notice" />


                                                        <!-- RIGHTS -->
                                                        <apex:outputText rendered="{! country_local != 'ae' }" value="{!IF(lang_country == 'eng-e1', $Label.IDENTITY_Registration_Rights_Declaration_Eng_E1, $Label.IDENTITY_Registration_Rights_Declaration+$Label.IDENTITY_Registration_Rights_Declaration_Next)}"
                                                            escape="false" styleClass="id-page-form__disclaimer" />
                                                    </div>
                                                </apex:outputPanel>

                                                <!-- ****************************** VERIFICATION SECTION ****************************** -->

                                                <apex:outputPanel layout="block" id="verification_section"
                                                    style="display: none"
                                                    styleClass="id-page-form__step id-page-form__step_num_3">
                                                    <div>
                                                        <h2 id="h2_activation" tabindex="-1">
                                                            <apex:outputText value="{! IF(origin != 'lvconnect' ,$Label.IDENTITY_Registration_Verification_Section_Title,
                                                                                    $Label.IDENTITY_LV_Connect_Activation_Section_Title)}"
                                                                styleClass="id-page-form__section-title" />
                                                            <apex:outputText styleClass="id-page-form__section-count"
                                                                             rendered="{ origin != 'lvconnect' }"/>
                                                        </h2>
                                                        <apex:outputText id="skip_step2_error" value="{!$Label.IDENTITY_Registration_Skip_Step2_Error}"
                                                                    styleClass="id-page-form__field-error" style="margin-bottom:1.5rem" />
                                                        <div class="id-page-form__section">
                                                            <apex:outputText id="verification_description"
                                                                styleClass="id-page-form__section-subtitle"
                                                                escape="false" />
                                                            
                                                            <div title="{!$Label.IDENTITY_Registration_Verification_Section_Title}"
                                                                class="">
                                                                <apex:outputPanel layout="block"
                                                                    rendered="{! country_local == 'cn' }">
                                                                    <div id="TCaptcha" class="id-page-form__captcha"></div>
                                                                </apex:outputPanel>
                                                                <div class="activate-code-container id-page-form__field-wrap">
                                                                <apex:outputLabel for="input_code"
                                                                    value="{!IF ( origin != 'lvconnect' , $Label.IDENTITY_Registration_Verification_Code_Label,
                                                                                $Label.IDENTITY_LV_Connect_Activation_Code_label)}"
                                                                    styleClass="id-page-form__label id-page-form__label_is-required" />
                                                                <apex:input id="input_code" value="{! input_code }"
                                                                    html-placeholder="{!$Label.IDENTITY_Registration_Verification_Code_Placeholder }"
                                                                    type="tel" styleClass="id-page-form__field"
                                                                    onkeypress="return onHandleKeyPress(event)"
                                                                    html-aria-describedby="input_code_error"
                                                                    html-aria-required="true" 
                                                                    html-data-cs-mask=""/>
                                                                <apex:outputText id="input_code_error"
                                                                    styleClass="id-page-form__field-error" />
                                                                 </div>
                                                                <!-- SEND AGAIN -->
                                                                <apex:commandButton value="{!IF(origin != 'lvconnect' , $Label.IDENTITY_Registration_Verification_Section_Send,
                                                                                           $Label.IDENTITY_LV_Connect_Activation_Send_back)}"
                                                                    id="send_verification_code_link"
                                                                    onclick="onSendVerificationCodeClick(); return false;"
                                                                    reRender=""
                                                                    oncomplete=""
                                                                    styleClass="id-page-form-popover__send-again"
                                                                    html-data-evt-action-id="resend_activation_code"
                                                                    html-data-evt-page-rank="step_activation"
                                                                    html-data-evt-category-ga="mylv"
                                                                    html-data-evt-action-ga="create_an_account_form_sf"
                                                                    html-data-evt-label-ga="resend_activation_code" />
                                                                <apex:outputText id="resent_done_message"
                                                                    styleClass="id-page-form__section-subtitle"
                                                                    escape="false" />
        
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                    
                                                    <!-- SUBMIT -->
                                                    <apex:commandButton id="verification_button" reRender=""
                                                        value="{! IF( origin != 'lvconnect' , $Label.IDENTITY_Registration_Confirm_Button,
                                                               $Label.IDENTITY_LV_Connect_Activation_Submit_btn)}"
                                                        styleClass="id-page-form__btn id-page-form__btn_full-width btn-on-bottom"
                                                        onclick="onVerificationButtonSubmit(); return false;" />


                                                        <!-- LV CONNECT FOOTER -->
                                                    <apex:outputPanel layout="block" rendered="{! origin == 'lvconnect' }">
                                                        <div id="lv-connect-footer-wrapper">
                                                            <div class="title">{!$Label.IDENTITY_LV_Connect_Client_Service_Section_Title}</div>
                                                            <div class="phone-number">{!clientServicePhoneNumber}</div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    
                                                </apex:outputPanel>

                                                <!-- ****************************** AUTO CREATION SECTION ****************************** -->

                                                <apex:outputPanel layout="block" id="auto_registration_section"
                                                    style="display: none"
                                                    styleClass="id-page-form__step id-page-form__step_num_4">
                                                    <div>
                                                        <h2 id="h2_auto_registration" tabindex="-1">
                                                            <apex:outputText value="{! $Label.IDENTITY_Auto_Registration_Text}"
                                                                             escape="false"
                                                                styleClass="id-page-form__section-title" />
                                                        </h2>
                                                        
                                                    </div>
                                                    
                                                    <!-- SUBMIT -->
                                                    <div>
                                                      <apex:commandButton id="auto_registration_button" reRender=""
                                                        value="{! IF( origin != 'lvconnect' , $Label.IDENTITY_Registration_Title,
                                                               $Label.IDENTITY_LV_Connect_Activation_Submit_btn)}"
                                                        styleClass="id-page-form__btn id-page-form__btn_full-width btn-on-bottom"
                                                        onclick="onAutoRegistrationButtonSubmit(); return false;" />

                                                        <apex:outputText id="auto_registration_error"
                                                        styleClass="id-page-form__field-error" />  
                                                    </div>      


                                                        <!-- LV CONNECT FOOTER -->
                                                    <apex:outputPanel layout="block" rendered="{! origin == 'lvconnect' }">
                                                        <div id="lv-connect-footer-wrapper">
                                                            <div class="title">{!$Label.IDENTITY_LV_Connect_Client_Service_Section_Title}</div>
                                                            <div class="phone-number">{!clientServicePhoneNumber}</div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    
                                                </apex:outputPanel>


                                                <!-- ****************************** LOADER SECTION ****************************** -->

                                                <apex:outputPanel layout="block" id="loader_section"
                                                    styleClass="id-page-form__loader">
                                                    <apex:outputLabel value="{!$Label.IDENTITY_Registration_Activation_Label}" />
                                                </apex:outputPanel>

                                                <!-- ****************************** LOGIN MODAL SECTION ****************************** -->

                                                <div style="display: none" id="login_modal"
                                                    class="id-page-form-popover">
                                                    <div class="id-page-form-popover__content">
                                                        <button class="id-page-form-popover__close-btn"
                                                            onclick="onclickCloseLoginModal();return false;">
                                                        </button>
                                                        <apex:outputText value="{!$Label.IDENTITY_Registration_Account_Is_Already_Existing}"
                                                            styleClass="id-page-form-popover__notice" />

                                                        <apex:outputLabel for="password_login"
                                                            value="{!$Label.IDENTITY_Registration_Password_Label}"
                                                            styleClass="id-page-form__label id-page-form__label_is-required" />
                                                        <apex:inputSecret id="password_login" value="{! password }" maxlength="{! passwordMaxlength }"
                                                            redisplay="true" styleClass="id-page-form__field"
                                                            onkeypress="return onHandleKeyPress(event)" html-data-cs-mask="" />
                                                        <div class="id-page-form__show-pass-btn-wrap">
                                                            <button type="button"
                                                                    class="id-page-form__show-pass-btn"
                                                                    id="password_login_btn" onclick="hidePassword('password_login')"
                                                                    onblur="onPasswordBlur()" tabindex="3"></button>
                                                        </div>
                                                        <apex:outputText id="password_login_error"
                                                            styleClass="id-page-form__field-error" />

                                                        <!-- USERNAME HIDDEN -->
                                                        <apex:inputText id="username" style="display: none"
                                                            value="{! username }" />

                                                        <!-- FORGOT PASSWORD -->
                                                        <apex:commandLink value="{!$Label.IDENTITY_Registration_Forgot_Password}"
                                                            action="{! forgotPassword }"
                                                            styleClass="id-page-form-popover__forgot-pass"
                                                            html-data-evt-action-id="forgot_your_password"
                                                            html-data-evt-action-position="existing_email"
                                                            html-data-evt-page-rank="step_email"
                                                            html-data-evt-category-ga="mylv"
                                                            html-data-evt-action-ga="create_an_account_form_sf"
                                                            html-data-evt-label-ga="forgot_your_password" />

                                                        <!-- LOGIN -->
                                                        <apex:commandButton id="popover-login" onclick="login(); return false;"
                                                            reRender="" oncomplete=""
                                                            value="{!$Label.IDENTITY_Registration_Sign_In_Button}"
                                                            styleClass="id-page-form__btn id-page-form__btn_full-width"
                                                            >
                                                            <!-- POPOVER LOADER -->
                                                            <div id="popover-login-loader" class="wrap-loading"
                                                                style="display:none">
                                                                <div class="loading loading-1"></div>
                                                            </div>
                                                        </apex:commandButton>
                                                
                                                    </div>
                                                </div>

                                                <!-- BROWSERINFO HIDDEN -->
                                                <apex:inputText id="browser" value="{! browser }" style="display: none" />


                                                <!-- ACTION FUNCTION TO REFRESH KISA -->
                                                <apex:actionFunction name="updateExpandedIndex"
                                                    reRender="lvconnect_kisa_details,kisa_details,kisa-btn-1,kisa-btn-2,kisa-btn-3,kisa-btn-4">
                                                    <apex:param name="index" value=""
                                                        assignTo="{! expanded_kisa_details_index }" />
                                                </apex:actionFunction>

                                                <!-- ACTION FUNCTION TO SUBMIT -->
                                                <apex:actionFunction name="updateSubMode" action="{! updateSubMode }"
                                                    oncomplete="setVariable('sub_mode', '{!sub_mode}'); setFlow(); settings.remoting = false; "
                                                    reRender="">
                                                </apex:actionFunction>
                                                <apex:actionFunction name="loginPasswordMethod"
                                                    action="{! loginPasswordMethod }"
                                                    oncomplete="openLoginModal(null,null,true)" />
                                                <apex:actionFunction name="onPersonalSubmit"
                                                    action="{! onPersonalSubmit }"
                                                    oncomplete="afterSubmit('personal_button','#personal-section-loader')" />
                                                <apex:actionFunction name="onLoginSubmit" action="{! onLoginSubmit }"
                                                    oncomplete="afterSubmit('login_button','#login-section-loader')" />
                                                <apex:actionFunction name="register" action="{! register }" reRender=""
                                                    oncomplete="redirect()" />
                                                <apex:actionFunction name="onVerificationSubmit"
                                                    action="{! onVerificationSubmit }"
                                                    oncomplete="onInputCodeChange('{!isConfirmed}')" reRender="">
                                                    <apex:param name="is_valid_captcha" value=""
                                                        assignTo="{! isValidCaptcha }" />
                                                </apex:actionFunction>
                                                <apex:actionFunction name="redirect" action="{! redirect }" 
                                                    oncomplete="setRegistrationException('{!HTMLENCODE(registrationException)}')"
                                                    reRender=""/>
                                                <apex:actionFunction name="sendVerificationCodeByLinkClick"
                                                    action="{! sendVerificationCode }" oncomplete="setup();displayStatus('{!isSentSuccess}','{!isSentLimitReached}');" reRender="">
                                                </apex:actionFunction>
                                                <apex:actionFunction name="verifyCaptcha"
                                                    action="{! verifyCaptcha }" oncomplete="enableButton('[id$=\':verification_button\']', {!isValidCaptcha});" reRender="">
                                                    <apex:param name="captcha_ticket" value=""
                                                        assignTo="{! captcha_ticket }" />
                                                    <apex:param name="captcha_randstr" value=""
                                                        assignTo="{! captcha_randstr }" />
                                                </apex:actionFunction>

                                                <!-- ACTION FUNCTION TO SOCIAL LOGIN -->
                                                <apex:actionFunction name="socialLogin" action="{! socialLogin }"
                                                    oncomplete="" reRender="">
                                                    <apex:param name="social_media" value="" />
                                                </apex:actionFunction>

                                                <!-- ACTION FUNCTION TO LOG -->
                                                <apex:actionFunction name="onScriptError" action="{! onScriptError }"
                                                    oncomplete="" reRender="">
                                                    <apex:param name="src" value="" />
                                                </apex:actionFunction>
                                                                                            </apex:form>

                                        </div>
                                    </div>
                                </div>
                                <!-- MANAGED BY LV -->
                                <div id="sf-sidebar" class="registrationRightCol id-page__sidebar"></div>                                
                            </div>
                        </div>
                    </apex:outputPanel>

                    <!-- MANAGED BY LV -->
                    <footer></footer>
                </div>
            </body>

            <!-- STYLE -->
            <style type="text/css">
                .id-page-form__field::-ms-clear {
                    display: none;
                }
            </style>

            <!-- SETUP -->
            <script type="text/javascript">
                // INITIAL LOAD PAGE
                var settings = new Object();
                (function ready() {
                    setTimeout("logout()", 100);

                    // SET DATA
                    setVariables();
                    setAttributes();

                    // SET BROWSER DATA 
                    var browserdata = JSON.stringify({
                        'appCodeName': navigator.appCodeName,
                        'appName': navigator.appName,
                        'appVersion': navigator.appVersion,
                        'platform': navigator.platform,
                        'userAgent': navigator.userAgent,
                        'language': navigator.language,
                        'product': navigator.product,
                        'vendor': navigator.vendor
                    });
                    $('[id$=":browser"]').val(browserdata);

                    // SET FORM
                    setFlow();
                    setStep();
                    setup();
                    setDefaultStyle();
                    //manageAutoRegistration();
                })();

                // SET VARIABLES
                function setVariables() {
                    settings = {
                        isDevMode: '{!isDevMode}',
                        isTrustOrigin: '{!isTrustOrigin}',
                        mode: '{!mode}',
                        sub_mode: '{!sub_mode}',
                        isLoggin: "{!NOT(ISPICKVAL($User.UserType,'Guest'))}",
                        site_prefix: '{!$Site.Prefix}',
                        lang_country: '{!lang_country}',
                        dispatch_country: '{!dispatch_country}',
                        origin: '{!origin}',                        
                        country_local: '{!country_local}',
                        language: '{!language}',
                        meta_language: '{!meta_language}',
                        client_country: '{!client_country}',
                        client_login_email: '{!client_login_email}',
                        client_login_international_mobile_phone: '{!client_login_international_mobile_phone}',
                        fields: {
                            login_email: {
                                isHidden: "{! fields['Login']['email'].Is_Hidden__c}",
                                isRequired: "{! fields['Login']['email'].Is_Required__c}"
                            },
                            login_email_confirmation: {
                                isHidden: "{! fields['Login']['email_confirmation'].Is_Hidden__c}",
                                isRequired: "{! fields['Login']['email_confirmation'].Is_Required__c}"
                            },
                            login_mobile_phone: {
                                isHidden: "{! fields['Login']['mobile_phone'].Is_Hidden__c}",
                                isRequired: "{! fields['Login']['mobile_phone'].Is_Required__c}"
                            },
                            title: {
                                isHidden: "{!fields['Personal']['title'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['title'].Is_Required__c}"
                            },
                            firstname: {
                                isHidden: "{!fields['Personal']['firstname'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['firstname'].Is_Required__c}"
                            },
                            lastname: {
                                isHidden: "{!fields['Personal']['lastname'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['lastname'].Is_Required__c}"
                            },
                            birthdate: {
                                isHidden: "{!fields['Personal']['birthdate'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['birthdate'].Is_Required__c}"
                            },
                            postal_code: {
                                isHidden: "{false}",
                                isRequired: "{false}"
                            },
                            state: {
                                isHidden: "{false}",
                                isRequired: "{false}"
                            },
                            city: {
                                isHidden: "{false}",
                                isRequired: "{false}"
                            },
                            address1: {
                                isHidden: "{false}",
                                isRequired: "{false}"
                            },
                            address2: {
                                isHidden: "false",
                                isRequired: "false"
                            },
                            address3: {
                                isHidden: "false",
                                isRequired: "false"
                            },
                            firstname2: {
                                isHidden: "{!fields['Personal']['firstname2'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['firstname2'].Is_Required__c}"
                            },
                            lastname2: {
                                isHidden: "{!fields['Personal']['lastname2'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['lastname2'].Is_Required__c}"
                            },
                            country: {
                                isHidden: "{!fields['Personal']['country'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['country'].Is_Required__c}"
                            },
                            email: {
                                isHidden: "{!fields['Personal']['email'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['email'].Is_Required__c}"
                            },
                            mobile_phone: {
                                isHidden: "{!fields['Personal']['mobile_phone'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['mobile_phone'].Is_Required__c}"
                            },
                            newsletter_agreement: {
                                isHidden: "{!fields['Personal']['newsletter_agreement'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['newsletter_agreement'].Is_Required__c}"
                            },
                            privacy_agreement: {
                                isHidden: "{!fields['Personal']['privacy_agreement'].Is_Hidden__c}",
                                isRequired: "{!fields['Personal']['privacy_agreement'].Is_Required__c}"
                            },
                            cbdt_agreement: {
                                isHidden: "{!IF(country_local == 'cn','false','true')}",
                                isRequired: "{!IF(country_local == 'cn','true','false')}"
                            },
                            age_confirmation: {
                                isHidden: "{!IF(country_local == 'cn','false','true')}",
                                isRequired: "{!IF(country_local == 'cn','true','false')}"
                            },
                        },
                        labels: {
                            Required_Field: '{! $Label.IDENTITY_Registration_Required_Field }',
                            Sign_In_Button: '{! $Label.IDENTITY_Registration_Sign_In_Button }',
                            Next_Button: '{!$Label.IDENTITY_Registration_Next_Button}',
                            Incorrect_Password: '{! $Label.IDENTITY_Registration_Incorrect_Password }',
                            SMS_Verification_Section_Description: '{! $Label.IDENTITY_Registration_SMS_Verification_Section_Description }',
                            Email_Verification_Section_Description: '{! $Label.IDENTITY_Registration_Email_Verification_Section_Description }',
                            Validation_Format_Email_Message: '{! $Label.IDENTITY_Registration_Validation_Format_Email_Message }',
                            Validation_Format_Mobile_Phone_Message: '{! $Label.IDENTITY_Registration_Validation_Format_Mobile_Phone_Message }',
                            Kana_Error_Validation: '{! $Label.IDENTITY_Registration_Kana_Error_Validation }',
                            Kanji_Error_Validation: '{! $Label.IDENTITY_Registration_Kanji_Error_Validation }',
                            Cyrillic_Error_Validation: '{! $Label.IDENTITY_Registration_Cyrillic_Error_Validation }',
                            Password_Error: '{! $Label.IDENTITY_Registration_Password_Error }',
                            Invalid_Field_Error: '{! $Label.IDENTITY_Registration_Invalid_Format_Field_Error }',
                            Birthdate_Error: '{! $Label.IDENTITY_Registration_Birthdate_Error }',
                            Password_UsernameError: '{! $Label.IDENTITY_Registration_Password_UsernameError }',
                            Verification_Section_Error: '{!$Label.IDENTITY_Registration_Verification_Section_Error}',
                            Skip_Step2_Error: '{!$Label.IDENTITY_Registration_Skip_Step2_Error}',
                            Email_Confirmation_Doesn_t_Match: '{! $Label.IDENTITY_Registration_Email_Confirmation_Doesn_t_Match }',
                            Verification_Code_Resent: '{! $Label.IDENTITY_Registration_Verification_Code_Resent }',
                            Verification_Code_Failed: '{! $Label.IDENTITY_Registration_Verification_Code_Failed }',
                            Verification_Code_Limit: '{! $Label.IDENTITY_Registration_Verification_Code_Limit }',
                            Email_Repairs_Section_Description: '{! $Label.IDENTITY_Activation_Email_Section_Description }',
                            Mobile_Repairs_Section_Description: '{! $Label.IDENTITY_Activation_Mobile_Section_Description }'
                        },
                        static: {
                            LOADING_STEP: Number('{!LOADING_STEP}'),
                            KISSA_STEP: Number('{!KISSA_STEP}'),
                            LOGIN_STEP: Number('{!LOGIN_STEP}'),
                            PERSONAL_STEP: Number('{!PERSONAL_STEP}'),
                            VERIFICATION_STEP: Number('{!VERIFICATION_STEP}'),
                            AUTO_REG_STEP: Number('{!AUTO_REG_STEP}'),
                            REGISTRATION: '{!REGISTRATION}',
                            ACTIVATION: '{!ACTIVATION}',
                            SOCIAL_REGISTRATION: '{!SOCIAL_REGISTRATION}',
                            MATCHING: '{!MATCHING}',
                            FULL: '{!FULL}',
                            PARTIAL: '{!PARTIAL}',
                            AUTO: '{!AUTO}'
                        }
                    };
                }
            </script>

            <!-- CAPCTHA -->
            <apex:variable rendered="{! country_local == 'cn' }" var="captcha-script" value="captcha-script">
                <script type="text/javascript">
                    //button is disabled until captcha is confirmed.
                    enableButton('[id$=":verification_button"]', false);

                    var embedElement = document.getElementById("TCaptcha");
					var captcha = new TencentCaptcha(embedElement, '{!captcha_appId}', cbfn, { type: "embed" });
					captcha.show();

                    function cbfn(retJson) {
                        if (retJson.ret == 0) {
                            verifyCaptcha(retJson.ticket, retJson.randstr);
                        }
                    }
                </script>
            </apex:variable>

            <!-- TEALIUM -->
            <script type="text/javascript">
                // TEALIUM DATA LAYER OBJECT
                var utag_data = {
                    environmentType: "{!googleAnalyticsConfig['environmentType']}",
                    environmentId: "{!googleAnalyticsConfig['environmentId']}",
                    'environmentVersion': '{!country_local}',
                    'environmentLanguage': '{!meta_language}',
                    'environmentTealium': '{!tealiumEnv}',
                    'pageName': 'mylv/account_creation',
                    'pageType': 'account_creation',
                    'currencyCode': '{!client.currency_code}',
                    'screenOrientation': window.innerHeight > window.innerWidth ? 'portrait' : 'landscape',
                    'invoicingCountryForSite':'{!dispatch_country}'
                };

                //TEALIUM SNIPPET 
                (function (a, b, c, d) {
                    a = "{!JSINHTMLENCODE(paths['Tealium'])}";
                    b = document;
                    c = 'script';
                    d = b.createElement(c);
                    d.src = a;
                    d.type = 'text/java' + c;
                    d.async = true;
                    a = b.getElementsByTagName(c)[0];
                    a.parentNode.insertBefore(d, a);
                })();
            </script>

            <!-- import SIDEBAR MODAL AND FOOTER from ATG -->
                <script 
                    id="getHtmlFragment"
                    src="{! JSINHTMLENCODE(paths['Louis Vuitton Domain'] + paths['Get HTML Fragment Path']) }"
                    type="text/javascript">
                </script>
        </apex:define>
    </apex:composition>
</apex:page>